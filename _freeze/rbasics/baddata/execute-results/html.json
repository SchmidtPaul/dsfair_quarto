{
  "hash": "4a03533cc67c3a07b307972df7ace661",
  "result": {
    "markdown": "---\ntitle: \"Bad data & Outliers\"\ndate: 2022-10-17\n---\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npacman::p_load(\n  broom,\n  conflicted,\n  here,\n  janitor,\n  readxl,\n  tidyverse\n)\n```\n:::\n\n\nThere are two download links:\n\n-   Download the **original** excel file [here](https://drive.google.com/uc?export=download&id=1HuzLyyIt0Ihh8crV2qV1qahC_lB3Zj2G).\n\n-   Download the **formatted** excel file [here](https://drive.google.com/uc?export=download&id=1xUDsQPI9kIRHYpNOvaOS4kYgOiXA15LD).\n\n# Data\n\nImagine that this dataset was obtained by you. You spent an entire day walking around the campus of a university and asked a total of 29 people for things like how old they are (`Ages`) and you also tested how well they could see on a scale of 1-10 (`Vision`).\n\n## Import\n\nAssuming you are working in a [R-project](https://support.rstudio.com/hc/en-us/articles/200526207-Using-RStudio-Projects), save the formatted file somewhere within the project directory. I have saved it within a sub folder called `data` so that the relative path to my file is `data/vision_fixed.xls`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\npath <- here(\"data\", \"vision_fixed.xls\")\ndat <- read_excel(path)\n\ndat\n```\n\n::: {.cell-output .cell-output-stdout}\n```{.custom-output}\n# A tibble: 29 × 9\n   Person     Ages Gender `Civil state` Height Profession Vision Dista…¹ PercD…²\n   <chr>     <dbl> <chr>  <chr>          <dbl> <chr>       <dbl>   <dbl>   <dbl>\n 1 Andrés       25 M      S                180 Student        10     1.5    15  \n 2 Anja         29 F      S                168 Professio…     10     4.5    45  \n 3 Armando      31 M      S                169 Professio…      9     4.5    50  \n 4 Carlos       25 M      M                185 Professio…      8     6      75  \n 5 Cristina     23 F      <NA>             170 Student        10     3      30  \n 6 Delfa        39 F      M                158 Professio…      6     4.5    75  \n 7 Eduardo      28 M      S                166 Professio…      8     4.5    56.2\n 8 Enrique      NA <NA>   <NA>              NA Professio…     NA     6      NA  \n 9 Fanny        25 F      M                164 Student         9     3      33.3\n10 Francisco    46 M      M                168 Professio…      8     4.5    56.2\n# … with 19 more rows, and abbreviated variable names ¹​Distance, ²​PercDist\n```\n:::\n:::\n\n\n## Goal\n\nVery much like in the previous chapter, our goal is to look at the relationship of two numeric variables: `Ages` and `Vision`. What is new about this data is, that it (i) has missing values and (ii) has a potential outlier.\n\n## Exploring\n\nTo quickly get a first feeling for this dataset, we can use `summary()` and draw a plot via `plot()` or `ggplot()`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsummary(dat)\n```\n\n::: {.cell-output .cell-output-stdout}\n```{.custom-output}\n    Person               Ages          Gender          Civil state       \n Length:29          Min.   :22.00   Length:29          Length:29         \n Class :character   1st Qu.:25.00   Class :character   Class :character  \n Mode  :character   Median :26.00   Mode  :character   Mode  :character  \n                    Mean   :30.61                                        \n                    3rd Qu.:29.50                                        \n                    Max.   :55.00                                        \n                    NA's   :1                                            \n     Height       Profession            Vision          Distance    \n Min.   :145.0   Length:29          Min.   : 3.000   Min.   :1.500  \n 1st Qu.:164.8   Class :character   1st Qu.: 7.000   1st Qu.:1.500  \n Median :168.0   Mode  :character   Median : 9.000   Median :3.000  \n Mean   :168.2                      Mean   : 8.357   Mean   :3.466  \n 3rd Qu.:172.8                      3rd Qu.:10.000   3rd Qu.:4.500  \n Max.   :190.0                      Max.   :10.000   Max.   :6.000  \n NA's   :1                          NA's   :1                       \n    PercDist     \n Min.   : 15.00  \n 1st Qu.: 20.24  \n Median : 40.18  \n Mean   : 45.45  \n 3rd Qu.: 57.19  \n Max.   :150.00  \n NA's   :1       \n```\n:::\n:::\n\n\n::: columns\n::: {.column width=\"49%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nplot(y = dat$Vision, x = dat$Ages)\n```\n\n::: {.cell-output-display}\n![](baddata_files/figure-html/unnamed-chunk-5-1.png){width=1650}\n:::\n:::\n\n:::\n\n::: {.column width=\"2%\"}\n:::\n\n::: {.column width=\"49%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nggplot(data = dat) +\n  aes(x = Ages, y = Vision) +\n  geom_point(size = 2) +\n  scale_x_continuous(\n    name = \"Person's age\",\n    limits = c(20, 60),\n    expand = expansion(mult = c(0, 0.05))\n  ) +\n  scale_y_continuous(\n    name = \"Person's vision\",\n    limits = c(0, NA),\n    breaks = seq(0, 10, 2),\n    expand = expansion(mult = c(0, 0.05))\n  ) +\n    theme_bw()\n```\n\n::: {.cell-output-display}\n![](baddata_files/figure-html/unnamed-chunk-6-1.png){width=1650}\n:::\n:::\n\n:::\n:::\n\nApparently, most people are in their 20s and can see quite well, however some people are older and they tend to have a vision that's a little worse.\n\n# Correlation & Regression\n\nLet's estimate the correlation and simple linear regression and look at the results in a tidy format:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncor <- cor.test(dat$Vision, dat$Ages)\ntidy(cor)\n```\n\n::: {.cell-output .cell-output-stdout}\n```{.custom-output}\n# A tibble: 1 × 8\n  estimate statistic p.value parameter conf.low conf.high method         alter…¹\n     <dbl>     <dbl>   <dbl>     <int>    <dbl>     <dbl> <chr>          <chr>  \n1   -0.497     -2.92 0.00709        26   -0.734    -0.153 Pearson's pro… two.si…\n# … with abbreviated variable name ¹​alternative\n```\n:::\n\n```{.r .cell-code}\nreg <- lm(Vision ~ Ages, data = dat)\ntidy(reg)\n```\n\n::: {.cell-output .cell-output-stdout}\n```{.custom-output}\n# A tibble: 2 × 5\n  term        estimate std.error statistic  p.value\n  <chr>          <dbl>     <dbl>     <dbl>    <dbl>\n1 (Intercept)  11.1       0.996      11.2  1.97e-11\n2 Ages         -0.0910    0.0311     -2.92 7.09e- 3\n```\n:::\n:::\n\n\nThus, we have a negative, moderate correlation of -0.497 and for the regression we have *Vision = 11.14 + -0.09 Ages*.\n",
    "supporting": [
      "baddata_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}