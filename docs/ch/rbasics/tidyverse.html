<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="dcterms.date" content="2023-11-16">
<title>dsfair_quarto - The tidyverse</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../img/favicon-32x32.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><link rel="stylesheet" href="../../styles.css">
<meta name="twitter:title" content="Data Science for Agriculture in R">
<meta name="twitter:description" content="a cookbook with statistical analyses of typical examples in life sciences with focus on experimental agriculture, biology, ecology and other related fields">
<meta name="twitter:image" content="https://schmidtpaul.github.io/dsfair_quarto/ch/rbasics/img/hexagonDSFAIR.png">
<meta name="twitter:creator" content="@SchmidtPaul1989">
<meta name="twitter:card" content="summary_large_image">
</head>
<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">DSFAIR</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-r-basics" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">R Basics</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-r-basics">
<li>
    <a class="dropdown-item" href="../../ch/rbasics/firststeps.html" rel="" target="">
 <span class="dropdown-text">First Steps</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../ch/rbasics/tidyverse.html" rel="" target="">
 <span class="dropdown-text">The tidyverse</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../ch/rbasics/correlation_regression.html" rel="" target="">
 <span class="dropdown-text">Correlation &amp; Regression</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../ch/rbasics/baddata.html" rel="" target="">
 <span class="dropdown-text">Bad data &amp; Outliers</span></a>
  </li>  
    </ul>
</li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-simple-experiments" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Simple Experiments</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-simple-experiments">
<li>
    <a class="dropdown-item" href="../../ch/exan/simple/crd_mead1993.html" rel="" target="">
 <span class="dropdown-text">1w CRD (Mead 1993)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../ch/exan/simple/rcbd_clewerscarisbrick2001.html" rel="" target="">
 <span class="dropdown-text">1w RCBD (Clewer &amp; Scarisbrickt 2001)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../ch/exan/simple/latsq_bridges1989.html" rel="" target="">
 <span class="dropdown-text">1w Latin Square (Bridges 1989)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../ch/exan/simple/augm_petersen1994.html" rel="" target="">
 <span class="dropdown-text">1w augmented (Petersen 1994)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../ch/exan/simple/alpha_johnwilliams1995.html" rel="" target="">
 <span class="dropdown-text">1w alpha (John &amp; Williams 1995)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../ch/exan/simple/rowcol_kemptonfox1997.html" rel="" target="">
 <span class="dropdown-text">1w rowcol (Kempton &amp; Fox 1997)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../ch/exan/simple/rcbd_gomezgomez1984.html" rel="" target="">
 <span class="dropdown-text">2w RCBD (Gomez &amp; Gomez 1984)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../ch/exan/simple/splitplot_gomezgomez1984.html" rel="" target="">
 <span class="dropdown-text">2w split-plot (Gomez &amp; Gomez 1984)</span></a>
  </li>  
    </ul>
</li>
  <li class="dropdown-header">
 <span class="menu-text">Complex Experiments</span>
</li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-summary-articles" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Summary Articles</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-summary-articles">
<li>
    <a class="dropdown-item" href="../../ch/summaryarticles/ggplot2intro.html" rel="" target="">
 <span class="dropdown-text">ggplot2 tutorial</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../ch/summaryarticles/compactletterdisplay.html" rel="" target="">
 <span class="dropdown-text">Compact Letter Display</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../ch/summaryarticles/designingexperiments.html" rel="" target="">
 <span class="dropdown-text">Designing Experiments</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../ch/summaryarticles/modeldiagnostics.html" rel="" target="">
 <span class="dropdown-text">Model Diagnostics</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../ch/summaryarticles/whyseequal.html" rel="" target="">
 <span class="dropdown-text">Why SE equal</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../ch/summaryarticles/anovatypes.html" rel="" target="">
 <span class="dropdown-text">ANOVA Types</span></a>
  </li>  
    </ul>
</li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-misc" role="button" data-bs-toggle="dropdown" aria-expanded="false" rel="" target="">
 <span class="menu-text">Misc</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-misc">
<li>
    <a class="dropdown-item" href="../../ch/misc/usefulthings.html" rel="" target="">
 <span class="dropdown-text">Useful things</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../ch/misc/exercises.html" rel="" target="">
 <span class="dropdown-text">Exercises</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../ch/misc/furtherresources.html" rel="" target="">
 <span class="dropdown-text">Other Resources</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../ch/misc/workshopprep.html" rel="" target="">
 <span class="dropdown-text">Workshop prep</span></a>
  </li>  
    </ul>
</li>
</ul>
<ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item">
    <a class="nav-link" href="https://schmidtpaul.github.io/" rel="" target="">
 <span class="menu-text">Contact</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/SchmidtPaul/dsfair_quarto" rel="" target=""><i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
<div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li>
<a href="#tables" id="toc-tables" class="nav-link active" data-scroll-target="#tables">Tables</a>
  <ul class="collapse">
<li><a href="#data.frame" id="toc-data.frame" class="nav-link" data-scroll-target="#data.frame">data.frame</a></li>
  <li><a href="#tibble" id="toc-tibble" class="nav-link" data-scroll-target="#tibble">tibble</a></li>
  </ul>
</li>
  <li><a href="#plots" id="toc-plots" class="nav-link" data-scroll-target="#plots">Plots</a></li>
  <li>
<a href="#the-pipe-operator" id="toc-the-pipe-operator" class="nav-link" data-scroll-target="#the-pipe-operator">The pipe operator</a>
  <ul class="collapse">
<li><a href="#no-pipe---intermediate-steps" id="toc-no-pipe---intermediate-steps" class="nav-link" data-scroll-target="#no-pipe---intermediate-steps">No pipe - intermediate steps</a></li>
  <li><a href="#no-pipe---nesting-functions" id="toc-no-pipe---nesting-functions" class="nav-link" data-scroll-target="#no-pipe---nesting-functions">No pipe - nesting functions</a></li>
  <li><a href="#pipe" id="toc-pipe" class="nav-link" data-scroll-target="#pipe">Pipe!</a></li>
  </ul>
</li>
  <li>
<a href="#dplyr-verbs" id="toc-dplyr-verbs" class="nav-link" data-scroll-target="#dplyr-verbs">dplyr verbs</a>
  <ul class="collapse">
<li><a href="#mutate" id="toc-mutate" class="nav-link" data-scroll-target="#mutate">mutate()</a></li>
  <li><a href="#select" id="toc-select" class="nav-link" data-scroll-target="#select">select()</a></li>
  <li><a href="#filter" id="toc-filter" class="nav-link" data-scroll-target="#filter">filter()</a></li>
  <li><a href="#arrange" id="toc-arrange" class="nav-link" data-scroll-target="#arrange">arrange()</a></li>
  <li><a href="#summarise" id="toc-summarise" class="nav-link" data-scroll-target="#summarise">summarise()</a></li>
  </ul>
</li>
  <li><a href="#longwide-format" id="toc-longwide-format" class="nav-link" data-scroll-target="#longwide-format">long/wide format</a></li>
  <li><a href="#forcats" id="toc-forcats" class="nav-link" data-scroll-target="#forcats">forcats</a></li>
  <li><a href="#stringr" id="toc-stringr" class="nav-link" data-scroll-target="#stringr">stringr</a></li>
  </ul><div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="tidyverse.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">The tidyverse</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliations</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author"><a href="https://schmidtpaul.github.io/">Paul Schmidt</a> </p>
  </div>
    <div class="quarto-title-meta-contents">
        <p class="affiliation">
            <a href="https://www.biomath.de/">
            BioMath GmbH
            </a>
          </p>
        <p class="affiliation">
            <a href="https://schmidtpaul.github.io/">
            &amp; Freelancer
            </a>
          </p>
      </div>
    </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Last updated</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 16, 2023</p>
    </div>
  </div>
  
    
  </div>
  
<div>
  <div class="abstract">
    <div class="abstract-title">Content summary</div>
    Pipe (%&gt;%), Tibbles, dplyr-verbs, long/wide format and more.
  </div>
</div>

</header><p>When using R, you will sooner or later hear about the <a href="https://www.wikiwand.com/en/Tidyverse">{tidyverse}</a>. The tidyverse is a collection of R packages that “share an underlying design philosophy, grammar, and data structures” of tidy data. The individual tidyverse packages comprise some of the most downloaded R packages.</p>
<p>Install the complete tidyverse with:</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"tidyverse"</span><span class="op">)</span></span>
<span><span class="co"># or</span></span>
<span><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="st">"tidyverse"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<table class="table">
<caption>Some of my favorite tidyverse packages</caption>
<thead><tr class="header">
<th style="text-align: center;">ggplot2</th>
<th style="text-align: center;">dplyr</th>
<th style="text-align: center;">tibble</th>
<th style="text-align: center;">forcats</th>
<th style="text-align: center;">stringr</th>
</tr></thead>
<tbody><tr class="odd">
<td style="text-align: center;"><a href="https://ggplot2.tidyverse.org/"><img src="https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/ggplot2.png" width="100"></a></td>
<td style="text-align: center;"><a href="https://dplyr.tidyverse.org/"><img src="https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/dplyr.png" width="100"></a></td>
<td style="text-align: center;"><a href="https://tibble.tidyverse.org/"><img src="https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/tibble.png" width="100"></a></td>
<td style="text-align: center;"><a href="https://forcats.tidyverse.org/"><img src="https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/forcats.png" width="100"></a></td>
<td style="text-align: center;"><a href="https://stringr.tidyverse.org/"><img src="https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/stringr.png" width="100"></a></td>
</tr></tbody>
</table>
<p>I did not use the tidyverse packages in my first years using R, but I wish I did. While you can often reach your goal with or without using the tidyverse packages, I personally prefer using them. Thus, they are used extensively throughout the chapters of this website.</p>
<p>During the next sections I will try to explain how to use some of these packages and sometimes compare them to the Base R (= non-tidyverse) alternative.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Additional Resources
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ul>
<li>
<a href="https://r4ds.had.co.nz/">“R for Data Science”</a> <span class="citation" data-cites="wickham_2017">(<a href="#ref-wickham_2017" role="doc-biblioref">Wickham and Grolemund 2017</a>)</span>, which is a book that can be read online for free and was written by the package authors themselves.</li>
</ul>
</div>
</div>
</div>
<section id="tables" class="level1"><h1>Tables</h1>
<p>Finally, we can now talk about data tables with rows and columns. In R, I like to think of a table as multiple vectors side by side, so that each column is a vector.</p>
<section id="data.frame" class="level2"><h2 class="anchored" data-anchor-id="data.frame">data.frame</h2>
<p>Base R has a standard format for data tables called <code>data.frame</code>. Here is an example table that is an R built-in, just like <code>pi</code> is - it is called <code>PlantGrowth</code>:</p>
<div class="cell">
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">PlantGrowth</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code>   weight group
1    4.17  ctrl
2    5.58  ctrl
3    5.18  ctrl
4    6.11  ctrl
5    4.50  ctrl
6    4.61  ctrl
7    5.17  ctrl
8    4.53  ctrl
9    5.33  ctrl
10   5.14  ctrl
11   4.81  trt1
12   4.17  trt1
13   4.41  trt1
14   3.59  trt1
15   5.87  trt1
16   3.83  trt1
17   6.03  trt1
18   4.89  trt1
19   4.32  trt1
20   4.69  trt1
21   6.31  trt2
22   5.12  trt2
23   5.54  trt2
24   5.50  trt2
25   5.37  trt2
26   5.29  trt2
27   4.92  trt2
28   6.15  trt2
29   5.80  trt2
30   5.26  trt2</code></pre>
</div>
</div>
<p>Let us create a copy of this table called <code>df</code> (<strong>d</strong>ata<strong>f</strong>rame) and then use some helpful functions to get a first impression of this data:</p>
<div class="cell">
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">PlantGrowth</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code>'data.frame':   30 obs. of  2 variables:
 $ weight: num  4.17 5.58 5.18 6.11 4.5 4.61 5.17 4.53 5.33 5.14 ...
 $ group : Factor w/ 3 levels "ctrl","trt1",..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
</div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code>     weight       group   
 Min.   :3.590   ctrl:10  
 1st Qu.:4.550   trt1:10  
 Median :5.155   trt2:10  
 Mean   :5.073            
 3rd Qu.:5.530            
 Max.   :6.310            </code></pre>
</div>
</div>
<p>We can see that this dataset has 30 observations (=rows) and 2 variables (=columns) and is of the type “data.frame”. Furthermore, the first variable is called <code>weight</code> and contains numeric values for which we get some measures of central tendency like the minimum, maximum, mean and median. The second variable is called <code>group</code> and is of the type factor containing a total of three different levels, which each appear 10 times.</p>
<p>If you want to extract/use values of only one column of such a data.frame, you write the name of the data.frame, then a <code>$</code> and finally the name of the respective column. It returns the values of that column as a vector:</p>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df</span><span class="op">$</span><span class="va">weight</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code> [1] 4.17 5.58 5.18 6.11 4.50 4.61 5.17 4.53 5.33 5.14 4.81 4.17 4.41 3.59 5.87
[16] 3.83 6.03 4.89 4.32 4.69 6.31 5.12 5.54 5.50 5.37 5.29 4.92 6.15 5.80 5.26</code></pre>
</div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df</span><span class="op">$</span><span class="va">group</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code> [1] ctrl ctrl ctrl ctrl ctrl ctrl ctrl ctrl ctrl ctrl trt1 trt1 trt1 trt1 trt1
[16] trt1 trt1 trt1 trt1 trt1 trt2 trt2 trt2 trt2 trt2 trt2 trt2 trt2 trt2 trt2
Levels: ctrl trt1 trt2</code></pre>
</div>
</div>
</section><section id="tibble" class="level2"><h2 class="anchored" data-anchor-id="tibble">tibble</h2>
<p>One major aspect of the tidyverse is formatting tables as <strong>tibble instead of data.frame</strong>. A tibble <em>“is a modern reimagining of the data.frame, keeping what time has proven to be effective, and throwing out what is not.”</em> It is super simple to convert a data.frame into a tibble, but you must have the tidyverse R package {tibble} installed and loaded - which it is if you are loading the entire {tidyverse}. Let us convert our <code>df</code> into a tibble and call it <code>tbl</code>:</p>
<div class="cell">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">tidyverse</span><span class="op">)</span></span>
<span><span class="va">tbl</span> <span class="op">&lt;-</span> <span class="fu">as_tibble</span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="va">tbl</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 30 × 2
   weight group
    &lt;dbl&gt; &lt;fct&gt;
 1   4.17 ctrl 
 2   5.58 ctrl 
 3   5.18 ctrl 
 4   6.11 ctrl 
 5   4.5  ctrl 
 6   4.61 ctrl 
 7   5.17 ctrl 
 8   4.53 ctrl 
 9   5.33 ctrl 
10   5.14 ctrl 
# ℹ 20 more rows</code></pre>
</div>
</div>
<p>Of course, the data itself does not change - only its format and the way it is displayed to us in R. If you compare the output we get from printing <code>tbl</code> here to that of printing <code>df</code> above, I would like to point out some things I find extremely convenient for tibbles:</p>
<ol type="1">
<li>There is an extra first line telling us about the number of rows and columns.</li>
<li>There is an extra line below the column names telling us about the data type of each column.</li>
<li>Only the first ten rows of data are printed and a <em>“… with 20 more rows”</em> is added below.</li>
<li>It can’t be seen here, but this would analogously happen if there were too many columns.</li>
<li>It can’t be seen here, but missing values <code>NA</code> and negative numbers are printed in red.</li>
</ol>
<p>Finally, note that in its heart, a tibble is still a data.frame and in most cases you can do everything with a tibble that you can do with a data.frame:</p>
<div class="columns">
<div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">tbl</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code>[1] "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">tbl</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code>tibble [30 × 2] (S3: tbl_df/tbl/data.frame)
 $ weight: num [1:30] 4.17 5.58 5.18 6.11 4.5 4.61 5.17 4.53 5.33 5.14 ...
 $ group : Factor w/ 3 levels "ctrl","trt1",..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
</div>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">tbl</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code>     weight       group   
 Min.   :3.590   ctrl:10  
 1st Qu.:4.550   trt1:10  
 Median :5.155   trt2:10  
 Mean   :5.073            
 3rd Qu.:5.530            
 Max.   :6.310            </code></pre>
</div>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tbl</span><span class="op">$</span><span class="va">weight</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code> [1] 4.17 5.58 5.18 6.11 4.50 4.61 5.17 4.53 5.33 5.14 4.81 4.17 4.41 3.59 5.87
[16] 3.83 6.03 4.89 4.32 4.69 6.31 5.12 5.54 5.50 5.37 5.29 4.92 6.15 5.80 5.26</code></pre>
</div>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tbl</span><span class="op">$</span><span class="va">group</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code> [1] ctrl ctrl ctrl ctrl ctrl ctrl ctrl ctrl ctrl ctrl trt1 trt1 trt1 trt1 trt1
[16] trt1 trt1 trt1 trt1 trt1 trt2 trt2 trt2 trt2 trt2 trt2 trt2 trt2 trt2 trt2
Levels: ctrl trt1 trt2</code></pre>
</div>
</div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code>[1] "data.frame"</code></pre>
</div>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code>'data.frame':   30 obs. of  2 variables:
 $ weight: num  4.17 5.58 5.18 6.11 4.5 4.61 5.17 4.53 5.33 5.14 ...
 $ group : Factor w/ 3 levels "ctrl","trt1",..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
</div>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code>     weight       group   
 Min.   :3.590   ctrl:10  
 1st Qu.:4.550   trt1:10  
 Median :5.155   trt2:10  
 Mean   :5.073            
 3rd Qu.:5.530            
 Max.   :6.310            </code></pre>
</div>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df</span><span class="op">$</span><span class="va">weight</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code> [1] 4.17 5.58 5.18 6.11 4.50 4.61 5.17 4.53 5.33 5.14 4.81 4.17 4.41 3.59 5.87
[16] 3.83 6.03 4.89 4.32 4.69 6.31 5.12 5.54 5.50 5.37 5.29 4.92 6.15 5.80 5.26</code></pre>
</div>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">df</span><span class="op">$</span><span class="va">group</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code> [1] ctrl ctrl ctrl ctrl ctrl ctrl ctrl ctrl ctrl ctrl trt1 trt1 trt1 trt1 trt1
[16] trt1 trt1 trt1 trt1 trt1 trt2 trt2 trt2 trt2 trt2 trt2 trt2 trt2 trt2 trt2
Levels: ctrl trt1 trt2</code></pre>
</div>
</div>
</div>
</div>
<p>Therefore, I almost always format my datasets as tibbles.</p>
</section></section><section id="plots" class="level1"><h1>Plots</h1>
<p>Base R has a <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code> function which is good at getting some first data visualizations with very little code. It guesses what type of plot you would like to see via the data type of the respective data to be plotted:</p>
<div>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">weight</span><span class="op">)</span> <span class="co"># scatter plot of values in the order they appear</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">group</span><span class="op">)</span> <span class="co"># bar plot of frequency of each level</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">df</span><span class="op">$</span><span class="va">group</span>, y <span class="op">=</span> <span class="va">df</span><span class="op">$</span><span class="va">weight</span><span class="op">)</span> <span class="co"># boxplot for values of each level</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-figure quarto-figure-center" style="flex-basis: 33.3%;justify-content: center;">
<figure class="figure"><p><a href="tidyverse_files/figure-html/unnamed-chunk-9-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="tidyverse_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="1500"></a></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center" style="flex-basis: 33.3%;justify-content: center;">
<figure class="figure"><p><a href="tidyverse_files/figure-html/unnamed-chunk-9-2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="tidyverse_files/figure-html/unnamed-chunk-9-2.png" class="img-fluid figure-img" width="1500"></a></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center" style="flex-basis: 33.3%;justify-content: center;">
<figure class="figure"><p><a href="tidyverse_files/figure-html/unnamed-chunk-9-3.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="tidyverse_files/figure-html/unnamed-chunk-9-3.png" class="img-fluid figure-img" width="1500"></a></p>
</figure>
</div>
</div>
</div>
</div>
<p>However, I really just use <code><a href="https://rdrr.io/r/graphics/plot.default.html">plot()</a></code> to get a quick first glance at data. In order to get professional visualizations I always use the tidyverse package <a href="https://ggplot2.tidyverse.org">ggplot2</a> and its function <code>ggplot()</code>. It seems like it can create any plot you can imagine and there are multiple examples with increasing complexity spread out through this website’s chapters.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Additional Resources
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ul>
<li>Cédric Scherer’s <span class="citation" data-cites="scherer_2022">(<a href="#ref-scherer_2022" role="doc-biblioref">2022</a>)</span> <a href="https://www.cedricscherer.com/2019/08/05/a-ggplot2-tutorial-for-beautiful-plotting-in-r/">A ggplot2 tutorial for beautiful plotting in R</a>
</li>
<li><a href="https://exts.ggplot2.tidyverse.org/gallery/">ggplot2 extensions gallery</a></li>
</ul>
</div>
</div>
</div>
</section><section id="the-pipe-operator" class="level1"><h1>The pipe operator</h1>
<p>The pipe operator <em>“completely changed the way how we code in R, making it more simple and readable”</em> <span class="citation" data-cites="álvarez_2021">(<a href="#ref-%C3%A1lvarez_2021" role="doc-biblioref">Álvarez 2021</a>)</span>. I started using the pipe as <code>%&gt;%</code> from the {dplyr} package<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. However, since May 18, 2021 (= R 4.1.0) the pipe is officially part of Base R - although written as <code>|&gt;</code><a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>.</p>
<p>To understand what makes it so great we need to start using more than one function at a time. So far, we have only used functions individually. Yet, in real life you will often find yourself having to combine multiple functions. As a fictional example, let’s say that from the <code>PlantGrowth</code> data, we want to extract a sorted vector of the square root of all weight-values that belong to the <code>ctrl</code> group. I will show three approaches how to accomplish this</p>
<section id="no-pipe---intermediate-steps" class="level2"><h2 class="anchored" data-anchor-id="no-pipe---intermediate-steps">No pipe - intermediate steps</h2>
<p>Using one function at a time and saving the output in the variables <code>a</code> - <code>d</code>, we can do this:</p>
<div class="cell">
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">PlantGrowth</span>, <span class="va">group</span> <span class="op">==</span> <span class="st">"ctrl"</span><span class="op">)</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu">pull</span><span class="op">(</span><span class="va">a</span>, <span class="va">weight</span><span class="op">)</span> <span class="co"># same as: b &lt;- a$weight</span></span>
<span><span class="va">c</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span></span>
<span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">c</span>, digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code> [1] 2.0 2.1 2.1 2.1 2.3 2.3 2.3 2.3 2.4 2.5</code></pre>
</div>
</div>
</section><section id="no-pipe---nesting-functions" class="level2"><h2 class="anchored" data-anchor-id="no-pipe---nesting-functions">No pipe - nesting functions</h2>
<p>Just like in MS Excel, it is possible to write functions inside of functions so that we can do this:</p>
<div class="cell">
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="fu">pull</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">PlantGrowth</span>, <span class="va">group</span> <span class="op">==</span> <span class="st">"ctrl"</span><span class="op">)</span>, <span class="va">weight</span><span class="op">)</span><span class="op">)</span>, digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code> [1] 2.0 2.1 2.1 2.1 2.3 2.3 2.3 2.3 2.4 2.5</code></pre>
</div>
</div>
</section><section id="pipe" class="level2"><h2 class="anchored" data-anchor-id="pipe">Pipe!</h2>
<p>This approach (i) allows you to write functions from left to right / top to bottom and thus in the order they are executed and the way you think about them and (ii) does not create extra variables for intermediate steps:</p>
<div class="cell">
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">PlantGrowth</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">group</span> <span class="op">==</span> <span class="st">"ctrl"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">pull</span><span class="op">(</span><span class="va">weight</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code> [1] 2.0 2.1 2.1 2.1 2.3 2.3 2.3 2.3 2.4 2.5</code></pre>
</div>
</div>
<p>You can think about it like this: Something (in this case the <code>PlantGrowth</code> data.frame) goes into the pipe and is directed to the next function <code><a href="https://rdrr.io/r/stats/filter.html">filter()</a></code>. By default, this function takes what came out of the previous pipe and puts it as its first argument. This happens with every pipe. You’ll notice that all the functions who required two arguments above, now only need one argument, <em>i.e.</em> the additional argument, because the main argument stating which data is to be used is by default simply what came out of the previous pipe. Accordingly, the functions <code><a href="https://rdrr.io/r/base/MathFun.html">sqrt()</a></code> and <code><a href="https://rdrr.io/r/base/sort.html">sort()</a></code> appear empty here, because they only need one piece of information and that is which data they should work with. Finally note that you can easily highlight only some of the lines up until one of the pipes to see the intermediate results.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The keyboard shortcut for writing <code>%&gt;%</code> in RStudio is <strong>CTRL+SHIFT+M</strong>. Keyboard shortcuts can be customized in RStudio as described <a href="https://support.rstudio.com/hc/en-us/articles/206382178-Customizing-Keyboard-Shortcuts-in-the-RStudio-IDE">here</a>.</p>
</div>
</div>
</section></section><section id="dplyr-verbs" class="level1"><h1>dplyr verbs</h1>
<p>Taken directly from <a href="https://dplyr.tidyverse.org/">the documentation</a>:</p>
<blockquote class="blockquote">
<p>{dplyr} is a grammar of data manipulation, providing a consistent set of verbs that help you solve the most common data manipulation challenges:</p>
<ul>
<li><p><code>mutate()</code> adds new variables that are functions of existing variables.</p></li>
<li><p><code>select()</code> picks variables based on their names.</p></li>
<li><p><code><a href="https://rdrr.io/r/stats/filter.html">filter()</a></code> picks cases based on their values.</p></li>
<li><p><code>summarise()</code> reduces multiple values down to a single summary.</p></li>
<li><p><code>arrange()</code> changes the ordering of the rows.</p></li>
</ul>
<p>These all combine naturally with <code>group_by()</code> which allows you to perform any operation “by group”. If you are new to dplyr, the best place to start is <a href="https://r4ds.had.co.nz/transform.html">the data transformation chapter</a> in <em>R for data science</em> <span class="citation" data-cites="wickham_2017">(<a href="#ref-wickham_2017" role="doc-biblioref">Wickham and Grolemund 2017</a>)</span>.</p>
</blockquote>
<p>In my experience you really can do most of the data manipulation before and after the actual statistics with these functions. In other words, it is exactly these functions who can and should replace the manual work you may currently even be doing in MS Excel. In the following sections I will give very brief examples of how to use these functions while always pointing to more thorough resources.</p>
<section id="mutate" class="level2"><h2 class="anchored" data-anchor-id="mutate">mutate()</h2>
<p>This function is useful whenever you want to change existing columns or add new columns to your table. To keep the following examples short and simple, let’s create <code>tbl2</code> as only the first six rows of <code>tbl</code> via the <code><a href="https://rdrr.io/r/utils/head.html">head()</a></code> function:</p>
<div class="cell">
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tbl2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">tbl</span><span class="op">)</span></span>
<span><span class="va">tbl2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 6 × 2
  weight group
   &lt;dbl&gt; &lt;fct&gt;
1   4.17 ctrl 
2   5.58 ctrl 
3   5.18 ctrl 
4   6.11 ctrl 
5   4.5  ctrl 
6   4.61 ctrl </code></pre>
</div>
</div>
<p>Let’s start by adding 2 to the <code>weight</code> in our data. Below, we do this two different ways: by adding a column named <code>new</code> to the dataset (left) and by replacing/overwriting the original <code>weight</code> column (right):</p>
<div class="columns">
<div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tbl2</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>new <span class="op">=</span> <span class="va">weight</span> <span class="op">+</span> <span class="fl">2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 6 × 3
  weight group   new
   &lt;dbl&gt; &lt;fct&gt; &lt;dbl&gt;
1   4.17 ctrl   6.17
2   5.58 ctrl   7.58
3   5.18 ctrl   7.18
4   6.11 ctrl   8.11
5   4.5  ctrl   6.5 
6   4.61 ctrl   6.61</code></pre>
</div>
</div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tbl2</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>weight <span class="op">=</span> <span class="va">weight</span> <span class="op">+</span> <span class="fl">2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 6 × 2
  weight group
   &lt;dbl&gt; &lt;fct&gt;
1   6.17 ctrl 
2   7.58 ctrl 
3   7.18 ctrl 
4   8.11 ctrl 
5   6.5  ctrl 
6   6.61 ctrl </code></pre>
</div>
</div>
</div>
</div>
<p>We can also create multiple columns at once (left) and make the values of the new column dynamically depend on the other columns via <code>case_when()</code> (right):</p>
<div class="columns">
<div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tbl2</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    `Name with Space` <span class="op">=</span> <span class="st">"Hello!"</span>,</span>
<span>    number10 <span class="op">=</span> <span class="fl">10</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 6 × 4
  weight group `Name with Space` number10
   &lt;dbl&gt; &lt;fct&gt; &lt;chr&gt;                &lt;dbl&gt;
1   4.17 ctrl  Hello!                  10
2   5.58 ctrl  Hello!                  10
3   5.18 ctrl  Hello!                  10
4   6.11 ctrl  Hello!                  10
5   4.5  ctrl  Hello!                  10
6   4.61 ctrl  Hello!                  10</code></pre>
</div>
</div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tbl2</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>size <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span></span>
<span>    <span class="va">weight</span> <span class="op">&gt;</span> <span class="fl">5.5</span> <span class="op">~</span> <span class="st">"large"</span>,</span>
<span>    <span class="va">weight</span> <span class="op">&lt;</span> <span class="fl">4.5</span> <span class="op">~</span> <span class="st">"small"</span>,</span>
<span>    <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"normal"</span> <span class="co"># everything else</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 6 × 3
  weight group size  
   &lt;dbl&gt; &lt;fct&gt; &lt;chr&gt; 
1   4.17 ctrl  small 
2   5.58 ctrl  large 
3   5.18 ctrl  normal
4   6.11 ctrl  large 
5   4.5  ctrl  normal
6   4.61 ctrl  normal</code></pre>
</div>
</div>
</div>
</div>
<p>Finally, we can efficiently apply the same function to multiple columns at once via <code>across()</code>. We can select the columns e.g.&nbsp;manually via their names in a vector (left) or via a function such as <code>is.numeric</code> (right):</p>
<div class="columns">
<div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tbl2</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>v1 <span class="op">=</span> <span class="fl">1</span>, v2 <span class="op">=</span> <span class="fl">2</span>, v3 <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    <span class="fu">across</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">v1</span>, <span class="va">v2</span><span class="op">)</span>, <span class="op">~</span> <span class="va">.x</span> <span class="op">+</span> <span class="fl">20</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 6 × 5
  weight group    v1    v2    v3
   &lt;dbl&gt; &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1   4.17 ctrl     21    22     3
2   5.58 ctrl     21    22     3
3   5.18 ctrl     21    22     3
4   6.11 ctrl     21    22     3
5   4.5  ctrl     21    22     3
6   4.61 ctrl     21    22     3</code></pre>
</div>
</div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tbl2</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>v1 <span class="op">=</span> <span class="fl">1</span>, v2 <span class="op">=</span> <span class="fl">2</span>, v3 <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    <span class="fu">across</span><span class="op">(</span><span class="fu">where</span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span>, <span class="op">~</span> <span class="va">.x</span> <span class="op">+</span> <span class="fl">20</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 6 × 5
  weight group    v1    v2    v3
   &lt;dbl&gt; &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1   24.2 ctrl     21    22    23
2   25.6 ctrl     21    22    23
3   25.2 ctrl     21    22    23
4   26.1 ctrl     21    22    23
5   24.5 ctrl     21    22    23
6   24.6 ctrl     21    22    23</code></pre>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Additional Resources
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ul>
<li>
<a href="https://r4ds.had.co.nz/transform.html#add-new-variables-with-mutate">5.5 Add new variables with mutate()</a> in <em>R for data science</em> <span class="citation" data-cites="wickham_2017">(<a href="#ref-wickham_2017" role="doc-biblioref">Wickham and Grolemund 2017</a>)</span>
</li>
<li><a href="https://dplyr.tidyverse.org/reference/mutate.html">Create, modify, and delete columns with mutate()</a></li>
<li><a href="https://dplyr.tidyverse.org/reference/case_when.html">A general vectorised if with case_when()</a></li>
<li><a href="https://dplyr.tidyverse.org/reference/across.html">Apply a function (or functions) across multiple columns with across()</a></li>
</ul>
</div>
</div>
</div>
</section><section id="select" class="level2"><h2 class="anchored" data-anchor-id="select">select()</h2>
<p>This function is useful whenever you want to select a subset of columns or change the order of columns. To provide better examples, let’s first create a table <code>tbl3</code> with a few more columns:</p>
<div class="cell">
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tbl3</span> <span class="op">&lt;-</span> <span class="va">tbl2</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>var1 <span class="op">=</span> <span class="fl">1</span>, var2 <span class="op">=</span> <span class="fl">2</span>, var3 <span class="op">=</span> <span class="st">"text"</span>, var4 <span class="op">=</span> <span class="st">"word"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 6 × 6
  weight group  var1  var2 var3  var4 
   &lt;dbl&gt; &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
1   4.17 ctrl      1     2 text  word 
2   5.58 ctrl      1     2 text  word 
3   5.18 ctrl      1     2 text  word 
4   6.11 ctrl      1     2 text  word 
5   4.5  ctrl      1     2 text  word 
6   4.61 ctrl      1     2 text  word </code></pre>
</div>
</div>
<p>We can now select individual columns manually by giving all names (left) and even select all columns <code>from:to</code> by writing a colon between them (right):</p>
<div class="columns">
<div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tbl3</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">group</span>, <span class="va">var1</span>, <span class="va">var4</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 6 × 3
  group  var1 var4 
  &lt;fct&gt; &lt;dbl&gt; &lt;chr&gt;
1 ctrl      1 word 
2 ctrl      1 word 
3 ctrl      1 word 
4 ctrl      1 word 
5 ctrl      1 word 
6 ctrl      1 word </code></pre>
</div>
</div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tbl3</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">group</span>, <span class="va">var1</span><span class="op">:</span><span class="va">var4</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 6 × 5
  group  var1  var2 var3  var4 
  &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
1 ctrl      1     2 text  word 
2 ctrl      1     2 text  word 
3 ctrl      1     2 text  word 
4 ctrl      1     2 text  word 
5 ctrl      1     2 text  word 
6 ctrl      1     2 text  word </code></pre>
</div>
</div>
</div>
</div>
<p>We can also delete specific columns by putting a <code>-</code> in fornt of their name or use functions like <code>starts_with()</code>, <code>ends_with()</code>, <code>contains()</code>, <code>matches()</code> and <code>num_range()</code> to select all columns based on (parts of) their name:</p>
<div class="columns">
<div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tbl3</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">group</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 6 × 5
  weight  var1  var2 var3  var4 
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
1   4.17     1     2 text  word 
2   5.58     1     2 text  word 
3   5.18     1     2 text  word 
4   6.11     1     2 text  word 
5   4.5      1     2 text  word 
6   4.61     1     2 text  word </code></pre>
</div>
</div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tbl3</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="fu">contains</span><span class="op">(</span><span class="st">"r"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 6 × 5
  group  var1  var2 var3  var4 
  &lt;fct&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
1 ctrl      1     2 text  word 
2 ctrl      1     2 text  word 
3 ctrl      1     2 text  word 
4 ctrl      1     2 text  word 
5 ctrl      1     2 text  word 
6 ctrl      1     2 text  word </code></pre>
</div>
</div>
</div>
</div>
<p>Finally, we can select based on a function like <code>is.numeric</code> via <code>where()</code> (left) or simply rearrange while keeping all columns by using <code>everything()</code> (right)</p>
<div class="columns">
<div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tbl3</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="fu">where</span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 6 × 3
  weight  var1  var2
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1   4.17     1     2
2   5.58     1     2
3   5.18     1     2
4   6.11     1     2
5   4.5      1     2
6   4.61     1     2</code></pre>
</div>
</div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tbl3</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">select</span><span class="op">(</span><span class="va">var1</span>, <span class="fu">everything</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 6 × 6
   var1 weight group  var2 var3  var4 
  &lt;dbl&gt;  &lt;dbl&gt; &lt;fct&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
1     1   4.17 ctrl      2 text  word 
2     1   5.58 ctrl      2 text  word 
3     1   5.18 ctrl      2 text  word 
4     1   6.11 ctrl      2 text  word 
5     1   4.5  ctrl      2 text  word 
6     1   4.61 ctrl      2 text  word </code></pre>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Additional Resources
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ul>
<li>
<a href="https://r4ds.had.co.nz/transform.html#select">5.4 Select columns with select()</a> in <em>R for data science</em> <span class="citation" data-cites="wickham_2017">(<a href="#ref-wickham_2017" role="doc-biblioref">Wickham and Grolemund 2017</a>)</span>
</li>
<li><a href="https://dplyr.tidyverse.org/reference/select.html">Subset columns using their names and types with select()</a></li>
<li><a href="https://tidyselect.r-lib.org/reference/starts_with.html">Select variables that match a pattern with starts_with() etc.</a></li>
<li><a href="https://tidyselect.r-lib.org/reference/where.html">Select variables with a function with where()</a></li>
</ul>
</div>
</div>
</div>
</section><section id="filter" class="level2"><h2 class="anchored" data-anchor-id="filter">filter()</h2>
<p>This function is useful whenever you want to subset rows based on their values. Note that for the examples here, we use the original <code>tbl</code> with 30 observations.</p>
<p>Let’s immediately filter for two conditions: Observations that belong to group <code>trt2</code> <strong>and</strong> (<code>&amp;</code>) are larger than 6 (left); Observations that are larger than 6 <strong>or</strong> (<code>|</code>) smaller than 4 (right):</p>
<div class="columns">
<div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tbl</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">weight</span> <span class="op">&gt;</span> <span class="fl">6</span> <span class="op">&amp;</span> <span class="va">group</span> <span class="op">==</span> <span class="st">"trt2"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 2 × 2
  weight group
   &lt;dbl&gt; &lt;fct&gt;
1   6.31 trt2 
2   6.15 trt2 </code></pre>
</div>
</div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tbl</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">weight</span> <span class="op">&gt;</span> <span class="fl">6</span> <span class="op">|</span> <span class="va">weight</span> <span class="op">&lt;</span> <span class="fl">4</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 6 × 2
  weight group
   &lt;dbl&gt; &lt;fct&gt;
1   6.11 ctrl 
2   3.59 trt1 
3   3.83 trt1 
4   6.03 trt1 
5   6.31 trt2 
6   6.15 trt2 </code></pre>
</div>
</div>
</div>
</div>
<p>Instead of writing a lot of conditions separated by <code>|</code>, it is often more efficient to use <code>%in%</code>:</p>
<div class="columns">
<div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tbl</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">group</span> <span class="op">==</span> <span class="st">"trt1"</span> <span class="op">|</span> <span class="va">group</span> <span class="op">==</span> <span class="st">"trt2"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 20 × 2
   weight group
    &lt;dbl&gt; &lt;fct&gt;
 1   4.81 trt1 
 2   4.17 trt1 
 3   4.41 trt1 
 4   3.59 trt1 
 5   5.87 trt1 
 6   3.83 trt1 
 7   6.03 trt1 
 8   4.89 trt1 
 9   4.32 trt1 
10   4.69 trt1 
11   6.31 trt2 
12   5.12 trt2 
13   5.54 trt2 
14   5.5  trt2 
15   5.37 trt2 
16   5.29 trt2 
17   4.92 trt2 
18   6.15 trt2 
19   5.8  trt2 
20   5.26 trt2 </code></pre>
</div>
</div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tbl</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">group</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"trt1"</span>, <span class="st">"trt2"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 20 × 2
   weight group
    &lt;dbl&gt; &lt;fct&gt;
 1   4.81 trt1 
 2   4.17 trt1 
 3   4.41 trt1 
 4   3.59 trt1 
 5   5.87 trt1 
 6   3.83 trt1 
 7   6.03 trt1 
 8   4.89 trt1 
 9   4.32 trt1 
10   4.69 trt1 
11   6.31 trt2 
12   5.12 trt2 
13   5.54 trt2 
14   5.5  trt2 
15   5.37 trt2 
16   5.29 trt2 
17   4.92 trt2 
18   6.15 trt2 
19   5.8  trt2 
20   5.26 trt2 </code></pre>
</div>
</div>
</div>
</div>
<p>We can also filter for values that <strong>are not</strong> of the <code>ctrl</code> group (left) or that are larger than the mean weight (right):</p>
<div class="columns">
<div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tbl</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">group</span> <span class="op">!=</span> <span class="st">"ctrl"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 20 × 2
   weight group
    &lt;dbl&gt; &lt;fct&gt;
 1   4.81 trt1 
 2   4.17 trt1 
 3   4.41 trt1 
 4   3.59 trt1 
 5   5.87 trt1 
 6   3.83 trt1 
 7   6.03 trt1 
 8   4.89 trt1 
 9   4.32 trt1 
10   4.69 trt1 
11   6.31 trt2 
12   5.12 trt2 
13   5.54 trt2 
14   5.5  trt2 
15   5.37 trt2 
16   5.29 trt2 
17   4.92 trt2 
18   6.15 trt2 
19   5.8  trt2 
20   5.26 trt2 </code></pre>
</div>
</div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tbl</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">weight</span> <span class="op">&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">weight</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 17 × 2
   weight group
    &lt;dbl&gt; &lt;fct&gt;
 1   5.58 ctrl 
 2   5.18 ctrl 
 3   6.11 ctrl 
 4   5.17 ctrl 
 5   5.33 ctrl 
 6   5.14 ctrl 
 7   5.87 trt1 
 8   6.03 trt1 
 9   6.31 trt2 
10   5.12 trt2 
11   5.54 trt2 
12   5.5  trt2 
13   5.37 trt2 
14   5.29 trt2 
15   6.15 trt2 
16   5.8  trt2 
17   5.26 trt2 </code></pre>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Additional Resources
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ul>
<li>
<a href="https://r4ds.had.co.nz/transform.html#filter-rows-with-filter">5.2 Filter rows with filter()</a> in <em>R for data science</em> <span class="citation" data-cites="wickham_2017">(<a href="#ref-wickham_2017" role="doc-biblioref">Wickham and Grolemund 2017</a>)</span>
</li>
<li><a href="https://dplyr.tidyverse.org/reference/filter.html">Subset rows using column values with filter()</a></li>
</ul>
</div>
</div>
</div>
</section><section id="arrange" class="level2"><h2 class="anchored" data-anchor-id="arrange">arrange()</h2>
<p>This function is useful whenever you want to sort rows based on their values. We’ll once more create a new version of our original dataset to best show what this function can do:</p>
<div class="cell">
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tbl4</span> <span class="op">&lt;-</span> <span class="va">tbl</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">slice</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">11</span><span class="op">:</span><span class="fl">13</span>, <span class="fl">21</span><span class="op">:</span><span class="fl">23</span><span class="op">)</span> </span>
<span><span class="co"># this keeps only rows 1,2,3,11,12,13,21,22,23</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can arrange rows via writing the column name (or column index/number). Note that by default values are sorted in ascending order and strings are sorted alphabetically, but this can be reversed by using <code>desc()</code>:</p>
<div class="columns">
<div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tbl4</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="va">weight</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 9 × 2
  weight group
   &lt;dbl&gt; &lt;fct&gt;
1   4.17 ctrl 
2   4.17 trt1 
3   4.41 trt1 
4   4.81 trt1 
5   5.12 trt2 
6   5.18 ctrl 
7   5.54 trt2 
8   5.58 ctrl 
9   6.31 trt2 </code></pre>
</div>
</div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb84"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tbl4</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="fu">desc</span><span class="op">(</span><span class="va">weight</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 9 × 2
  weight group
   &lt;dbl&gt; &lt;fct&gt;
1   6.31 trt2 
2   5.58 ctrl 
3   5.54 trt2 
4   5.18 ctrl 
5   5.12 trt2 
6   4.81 trt1 
7   4.41 trt1 
8   4.17 ctrl 
9   4.17 trt1 </code></pre>
</div>
</div>
</div>
</div>
<p>You can also sort via multiple columns and you can provide a custom sorting order in a vector:</p>
<div class="columns">
<div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb86"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tbl4</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="va">group</span>, <span class="va">weight</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 9 × 2
  weight group
   &lt;dbl&gt; &lt;fct&gt;
1   4.17 ctrl 
2   5.18 ctrl 
3   5.58 ctrl 
4   4.17 trt1 
5   4.41 trt1 
6   4.81 trt1 
7   5.12 trt2 
8   5.54 trt2 
9   6.31 trt2 </code></pre>
</div>
</div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb88"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">myorder</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"trt1"</span>, <span class="st">"ctrl"</span>, <span class="st">"trt2"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tbl4</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">arrange</span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/match.html">match</a></span><span class="op">(</span><span class="va">group</span>, <span class="va">myorder</span><span class="op">)</span>, </span>
<span>    <span class="va">weight</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 9 × 2
  weight group
   &lt;dbl&gt; &lt;fct&gt;
1   4.17 trt1 
2   4.41 trt1 
3   4.81 trt1 
4   4.17 ctrl 
5   5.18 ctrl 
6   5.58 ctrl 
7   5.12 trt2 
8   5.54 trt2 
9   6.31 trt2 </code></pre>
</div>
</div>
</div>
</div>
<p>Note that <code>NA</code> (= missing values) are always sorted to the end<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>, even when using <code>desc()</code>.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Additional Resources
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ul>
<li>
<a href="https://r4ds.had.co.nz/transform.html#arrange-rows-with-arrange">5.3 Arrange rows with arrange()</a> in <em>R for data science</em> <span class="citation" data-cites="wickham_2017">(<a href="#ref-wickham_2017" role="doc-biblioref">Wickham and Grolemund 2017</a>)</span>
</li>
<li><a href="https://dplyr.tidyverse.org/reference/arrange.html">Arrange rows by column values with arrange()</a></li>
<li><a href="https://stackoverflow.com/a/25267681/8830099">How to have NA’s displayed first using arrange()</a></li>
</ul>
</div>
</div>
</div>
</section><section id="summarise" class="level2"><h2 class="anchored" data-anchor-id="summarise">summarise()</h2>
<p>This function can be useful whenever you want to summarise data. Yet, it is not very useful (left) unless it is paired with <code>group_by()</code> (right).</p>
<div class="columns">
<div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tbl</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="co"># no group_by </span></span>
<span>  <span class="fu">summarise</span><span class="op">(</span>my_mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">weight</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 1 × 1
  my_mean
    &lt;dbl&gt;
1    5.07</code></pre>
</div>
</div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tbl</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">group</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>my_mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">weight</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 3 × 2
  group my_mean
  &lt;fct&gt;   &lt;dbl&gt;
1 ctrl     5.03
2 trt1     4.66
3 trt2     5.53</code></pre>
</div>
</div>
</div>
</div>
<p>You can create multiple summary output columns (left) and have multiple grouping columns (right):</p>
<div class="columns">
<div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb94"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tbl</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">group</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span></span>
<span>    Mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">weight</span><span class="op">)</span>,</span>
<span>    StdDev <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">weight</span><span class="op">)</span>,</span>
<span>    Min <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">weight</span><span class="op">)</span>,</span>
<span>    Median <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/median.html">median</a></span><span class="op">(</span><span class="va">weight</span><span class="op">)</span>,</span>
<span>    Max <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">weight</span><span class="op">)</span>,</span>
<span>    n_Obs <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 3 × 7
  group  Mean StdDev   Min Median   Max n_Obs
  &lt;fct&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;
1 ctrl   5.03  0.583  4.17   5.15  6.11    10
2 trt1   4.66  0.794  3.59   4.55  6.03    10
3 trt2   5.53  0.443  4.92   5.44  6.31    10</code></pre>
</div>
</div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb96"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tbl</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>larger5 <span class="op">=</span> <span class="fu">case_when</span><span class="op">(</span></span>
<span>    <span class="va">weight</span> <span class="op">&gt;</span> <span class="fl">5</span> <span class="op">~</span> <span class="st">"yes"</span>,</span>
<span>    <span class="va">weight</span> <span class="op">&lt;</span> <span class="fl">5</span> <span class="op">~</span> <span class="st">"no"</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">group</span>, <span class="va">larger5</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span></span>
<span>    n_Obs <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    Mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">weight</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 6 × 4
# Groups:   group [3]
  group larger5 n_Obs  Mean
  &lt;fct&gt; &lt;chr&gt;   &lt;int&gt; &lt;dbl&gt;
1 ctrl  no          4  4.45
2 ctrl  yes         6  5.42
3 trt1  no          8  4.34
4 trt1  yes         2  5.95
5 trt2  no          1  4.92
6 trt2  yes         9  5.59</code></pre>
</div>
</div>
</div>
</div>
<p>Just like with <code>mutate()</code>, we can make use of <code>across()</code> to deal with multiple columns:</p>
<div class="columns">
<div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb98"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tbl</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>v1 <span class="op">=</span> <span class="fl">1</span>, v2 <span class="op">=</span> <span class="fl">2</span>, v3 <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">group</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarise</span><span class="op">(</span><span class="fu">across</span><span class="op">(</span></span>
<span>    <span class="fu">where</span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span>, </span>
<span>    <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">.x</span><span class="op">)</span></span>
<span>    <span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 3 × 5
  group weight    v1    v2    v3
  &lt;fct&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 ctrl    5.03     1     2     3
2 trt1    4.66     1     2     3
3 trt2    5.53     1     2     3</code></pre>
</div>
</div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb100"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">tbl</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>v1 <span class="op">=</span> <span class="fl">1</span>, v2 <span class="op">=</span> <span class="fl">2</span>, v3 <span class="op">=</span> <span class="fl">3</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">group</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">summarise</span><span class="op">(</span><span class="fu">across</span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">weight</span>, <span class="va">v3</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span></span>
<span>    Min <span class="op">=</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">.x</span><span class="op">)</span>,</span>
<span>    Max <span class="op">=</span> <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">.x</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 3 × 5
  group weight_Min weight_Max v3_Min v3_Max
  &lt;fct&gt;      &lt;dbl&gt;      &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
1 ctrl        4.17       6.11      3      3
2 trt1        3.59       6.03      3      3
3 trt2        4.92       6.31      3      3</code></pre>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Once you used <code>group_by()</code> on a table, it stays grouped unless you use <code>ungroup()</code> on it afterwards. This was not relevant in the examples above, but you must be aware of this if you are using the grouped (summary) results for further steps, since this can lead to unexpected results. You can find an example and further resources on such unintended outcomes <a href="https://twitter.com/SchmidtPaul1989/status/1586284894556418049">here</a>.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Additional Resources
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ul>
<li>
<a href="https://r4ds.had.co.nz/transform.html#grouped-summaries-with-summarise">5.6 Grouped summaries with summarise()</a> in <em>R for data science</em> <span class="citation" data-cites="wickham_2017">(<a href="#ref-wickham_2017" role="doc-biblioref">Wickham and Grolemund 2017</a>)</span>
</li>
<li><a href="https://dplyr.tidyverse.org/reference/summarise.html">Summarise each group to fewer rows with summarise()</a></li>
<li><a href="https://dplyr.tidyverse.org/reference/group_by.html">Group by one or more variables with group_by()</a></li>
</ul>
</div>
</div>
</div>
</section></section><section id="longwide-format" class="level1"><h1>long/wide format</h1>
<p>Sometimes, data is referred to as being in <em>long format</em> or <em>wide format</em>. As the name suggests, long formatted tables have more rows, but fewer columns than wide formatted tables, while containing the same information. I find the easiest way to understand the two is by looking at examples like in the following image, which was taken from <a href="https://www.statology.org/long-vs-wide-data/">statology.org</a>:</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="../../img/longwide.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="../../img/longwide.png" class="img-fluid figure-img" style="width:80.0%"></a></p>
</figure>
</div>
</div>
</div>
<p>Converting one format into the other is called <em>pivoting</em> in the tidyverse and the relevant functions <code>pivot_longer()</code> and <code>pivot_wider()</code> are provided in <a href="https://tidyr.tidyverse.org/reference/index.html">{tidyr}</a>.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>You may have used other functions in this context. Here are some alternatives that <a href="https://github.com/tidyverse/tidyr#related-work">are superseded</a>:</p>
<ul>
<li>
<code>melt()</code> &amp; <code>dcast()</code> of {data.table}</li>
<li>
<code>fold()</code> &amp; <code>unfold()</code> of {databases}</li>
<li>
<code>melt()</code> &amp; <code>cast()</code> of {reshape}</li>
<li>
<code>melt()</code> &amp; <code>dcast()</code> of {reshape2}</li>
<li>
<code>unpivot()</code> &amp; <code>pivot()</code> of {spreadsheets}</li>
<li>
<code>gather()</code> &amp; <code>spread()</code> of {tidyr} &lt; v1.0.0</li>
</ul>
</div>
</div>
<p>The <code>PlantGrowth</code> data from above is actually already in long format, yet I create a version of it that is shorter (only 3 instead of 10 observations per group) and has an additional column called <code>nr</code> with is a running number per observation in each group:</p>
<div class="cell">
<div class="sourceCode" id="cb102"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">long_dat</span> <span class="op">&lt;-</span> <span class="va">PlantGrowth</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">group</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="co"># for each level in the "group" column</span></span>
<span>  <span class="fu">slice</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="co"># keep only the rows 1-3</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>nr <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fu">n</span><span class="op">(</span><span class="op">)</span>, <span class="co"># add a "nr" column with numbers 1 - ...</span></span>
<span>         .before <span class="op">=</span> <span class="st">"weight"</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="co"># add this column left of "weight" column</span></span>
<span>  <span class="fu">ungroup</span><span class="op">(</span><span class="op">)</span> <span class="co"># remove the grouping from above</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can now use <code>pivot_wider()</code> and create a wide formatted version of the <code>long_dat</code> table and save it as <code>wide_dat</code>. Note that the function has multiple arguments you can use, but for me it is usually enough to use <code>names from =</code> and <code>values_from =</code>. In the former you provide the name of the column whose entries should be the names of the new columns in the wide formatted data. In the latter you provide the name of the column whose values should be written in the new columns in the wide formatted data:</p>
<div class="columns">
<div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb103"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">long_dat</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 9 × 3
     nr weight group
  &lt;int&gt;  &lt;dbl&gt; &lt;fct&gt;
1     1   4.17 ctrl 
2     2   5.58 ctrl 
3     3   5.18 ctrl 
4     1   4.81 trt1 
5     2   4.17 trt1 
6     3   4.41 trt1 
7     1   6.31 trt2 
8     2   5.12 trt2 
9     3   5.54 trt2 </code></pre>
</div>
</div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb105"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">wide_dat</span> <span class="op">&lt;-</span> <span class="va">long_dat</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">pivot_wider</span><span class="op">(</span>names_from <span class="op">=</span> <span class="st">"group"</span>, </span>
<span>              values_from <span class="op">=</span> <span class="st">"weight"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">wide_dat</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 3 × 4
     nr  ctrl  trt1  trt2
  &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1     1  4.17  4.81  6.31
2     2  5.58  4.17  5.12
3     3  5.18  4.41  5.54</code></pre>
</div>
</div>
</div>
</div>
<p>We can use <code>pivot_longer</code> to reverse the step above, i.e.&nbsp;create a long formatted version of the <code>wide_dat</code> table. Again, the function has multiple arguments you can use, but for me it is usually enough to use <code>cols =</code>, <code>names_to =</code> and <code>values_to =</code>. In the first one, you provide the names of the columns who should be reduced to fewer columns with more rows. In the other two you simply give the names that the created columns should have instead of the default <code>name</code> and <code>value</code>. Note that it is sometimes easier to provide the names of columns that should not go into <code>cols =</code> (right) instead of the ones that should (left).</p>
<div class="columns">
<div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb107"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">wide_dat</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">pivot_longer</span><span class="op">(</span></span>
<span>    cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">ctrl</span>, <span class="va">trt1</span>, <span class="va">trt2</span><span class="op">)</span>,</span>
<span>    names_to <span class="op">=</span> <span class="st">"group"</span>,</span>
<span>    values_to <span class="op">=</span> <span class="st">"weight"</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 9 × 3
     nr group weight
  &lt;int&gt; &lt;chr&gt;  &lt;dbl&gt;
1     1 ctrl    4.17
2     1 trt1    4.81
3     1 trt2    6.31
4     2 ctrl    5.58
5     2 trt1    4.17
6     2 trt2    5.12
7     3 ctrl    5.18
8     3 trt1    4.41
9     3 trt2    5.54</code></pre>
</div>
</div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb109"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">wide_dat</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">pivot_longer</span><span class="op">(</span></span>
<span>    cols <span class="op">=</span> <span class="op">-</span><span class="va">nr</span>,</span>
<span>    names_to <span class="op">=</span> <span class="st">"group"</span>,</span>
<span>    values_to <span class="op">=</span> <span class="st">"weight"</span></span>
<span>  <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code># A tibble: 9 × 3
     nr group weight
  &lt;int&gt; &lt;chr&gt;  &lt;dbl&gt;
1     1 ctrl    4.17
2     1 trt1    4.81
3     1 trt2    6.31
4     2 ctrl    5.58
5     2 trt1    4.17
6     2 trt2    5.12
7     3 ctrl    5.18
8     3 trt1    4.41
9     3 trt2    5.54</code></pre>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Additional Resources
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ul>
<li>
<a href="https://r4ds.had.co.nz/tidy-data.html?q=pivot#pivoting">12.3 Pivoting</a> in <em>R for data science</em> <span class="citation" data-cites="wickham_2017">(<a href="#ref-wickham_2017" role="doc-biblioref">Wickham and Grolemund 2017</a>)</span>
</li>
<li><a href="https://tidyr.tidyverse.org/articles/pivot.html">Pivoting with tidyr</a></li>
<li><a href="https://github.com/rstudio/cheatsheets/blob/main/tidyr.pdf">tidyr cheat sheet</a></li>
</ul>
</div>
</div>
</div>
</section><section id="forcats" class="level1"><h1>forcats</h1>
<p>In my experience, R beginners really only care about the difference between <code>factor</code> and <code>character</code> variables once the factor level order is not as they want it to be - typically on the x-axis of a plot. Luckily, <a href="https://forcats.tidyverse.org/">{forcats}</a> can deal with this.</p>
<p>In the following example, we create a column <code>fct</code> that is a copy of the column <code>chr</code>, except that they are formatted as <code>factor</code> and <code>character</code>, respectively.</p>
<div class="cell">
<div class="sourceCode" id="cb111"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">tribble</span><span class="op">(</span></span>
<span>     <span class="op">~</span><span class="va">val</span>,   <span class="op">~</span><span class="va">chr</span>,</span>
<span>       <span class="fl">10</span>, <span class="st">"Ctrl"</span>, </span>
<span>       <span class="fl">15</span>,    <span class="st">"A"</span>,</span>
<span>        <span class="fl">8</span>,    <span class="st">"B"</span></span>
<span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span>fct <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">as.factor</a></span><span class="op">(</span><span class="va">chr</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">dat</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">val</span>, x <span class="op">=</span> <span class="va">fct</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_col</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="tidyverse_files/figure-html/unnamed-chunk-50-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="tidyverse_files/figure-html/unnamed-chunk-50-1.png" class="img-fluid figure-img" width="1650"></a></p>
</figure>
</div>
</div>
</div>
<p>Even though the data is sorted so that Ctrl is first, then A, then B, the x-Axis is sorted differently<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>. This is because factor levels are always sorted alphabetically by default. We can reorder them via different functions in {forcats}:</p>
<div class="cell">
<div class="sourceCode" id="cb112"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">dat</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    fct2 <span class="op">=</span> <span class="fu">fct_relevel</span><span class="op">(</span><span class="va">fct</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Ctrl"</span>, <span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    fct3 <span class="op">=</span> <span class="fu">fct_reorder</span><span class="op">(</span><span class="va">fct</span>, <span class="va">val</span>, <span class="va">mean</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code>tibble [3 × 5] (S3: tbl_df/tbl/data.frame)
 $ val : num [1:3] 10 15 8
 $ chr : chr [1:3] "Ctrl" "A" "B"
 $ fct : Factor w/ 3 levels "A","B","Ctrl": 3 1 2
 $ fct2: Factor w/ 3 levels "Ctrl","A","B": 1 2 3
 $ fct3: Factor w/ 3 levels "B","Ctrl","A": 2 3 1</code></pre>
</div>
</div>
<p>Above are just two popular examples for sorting factor levels: <code>fct_relevel</code> sorts the levels manually by providing a vector with the level names in the order they should appear, while <code>fct_reorder</code> here sorts the levels according to their respective group mean<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> of the values in the <code>val</code> column.</p>
<p>You can see that it worked in the output of <code>str(dat)</code> above and in the plots below.</p>
<div class="columns">
<div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb114"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span><span class="va">dat</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">val</span>, x <span class="op">=</span> <span class="va">fct2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_col</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="tidyverse_files/figure-html/unnamed-chunk-52-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6"><img src="tidyverse_files/figure-html/unnamed-chunk-52-1.png" class="img-fluid figure-img" width="1500"></a></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb115"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span><span class="va">dat</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">aes</span><span class="op">(</span>y <span class="op">=</span> <span class="va">val</span>, x <span class="op">=</span> <span class="va">fct3</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_col</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="tidyverse_files/figure-html/unnamed-chunk-53-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7"><img src="tidyverse_files/figure-html/unnamed-chunk-53-1.png" class="img-fluid figure-img" width="1500"></a></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section><section id="stringr" class="level1"><h1>stringr</h1>
<p>In computer programming, a string is traditionally a sequence of characters (or <em>text</em> if you will). Taken directly from <a href="https://stringr.tidyverse.org/">the documentation</a>:</p>
<blockquote class="blockquote">
<p>Strings are not glamorous, high-profile components of R, but they do play a big role in many data cleaning and preparation tasks. The stringr package provide a cohesive set of functions designed to make working with strings as easy as possible. If you’re not familiar with strings, the best place to start is the <a href="https://r4ds.had.co.nz/strings.html">chapter on strings in R for Data Science</a>.</p>
</blockquote>
<p>Below are some brief examples of <a href="https://stringr.tidyverse.org/">{stringr}</a> functions I use regularly. To show what they can do, let’s first create some strings<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a>:</p>
<div class="cell">
<div class="sourceCode" id="cb116"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">a_string</span> <span class="op">&lt;-</span> <span class="st">"  a  string with irregular  spaces. "</span></span>
<span><span class="va">strings</span> <span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"String 1"</span>, <span class="st">"String Two"</span>, <span class="st">"third string"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To remove part of a string, use <code>str_remove()</code>. To replace it, use <code>str_replace()</code>.</p>
<div class="columns">
<div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb117"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">strings</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">str_remove</span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"ing"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code>[1] "Str 1"     "Str Two"   "third str"</code></pre>
</div>
</div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb119"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">strings</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">str_replace</span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"ing"</span>,</span>
<span>              replacement <span class="op">=</span> <span class="st">"."</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code>[1] "Str. 1"     "Str. Two"   "third str."</code></pre>
</div>
</div>
</div>
</div>
<p>The functions <code>str_trim()</code> and <code>str_squish()</code> help remove unnecessary spaces from strings. The former removes them only from from start and end, while the latter also reduces repeated whitespace inside a string.</p>
<div class="columns">
<div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb121"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">a_string</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">str_trim</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code>[1] "a  string with irregular  spaces."</code></pre>
</div>
</div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb123"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">a_string</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">str_squish</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code>[1] "a string with irregular spaces."</code></pre>
</div>
</div>
</div>
</div>
<p>Finally, you can check if a pattern appears in a string, or extract part of a string:</p>
<div class="columns">
<div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb125"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">strings</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">str_detect</span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"Two"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code>[1] FALSE  TRUE FALSE</code></pre>
</div>
</div>
</div><div class="column" style="width:2%;">

</div><div class="column" style="width:49%;">
<div class="cell">
<div class="sourceCode" id="cb127"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">strings</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">str_sub</span><span class="op">(</span>start <span class="op">=</span> <span class="fl">1</span>, end <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre class="custom-output"><code>[1] "Stri" "Stri" "thir"</code></pre>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-12-contents" aria-controls="callout-12" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Additional Resources
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-12" class="callout-12-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ul>
<li>
<a href="https://r4ds.had.co.nz/strings.html">14 Strings</a> in <em>R for data science</em> <span class="citation" data-cites="wickham_2017">(<a href="#ref-wickham_2017" role="doc-biblioref">Wickham and Grolemund 2017</a>)</span>
</li>
<li><a href="https://github.com/rstudio/cheatsheets/blob/main/strings.pdf">stringr cheat sheet</a></li>
<li><a href="https://stringr.tidyverse.org/articles/regular-expressions.html">Regular expressions</a></li>
</ul>
</div>
</div>
</div>


<!-- -->


</section><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-álvarez_2021" class="csl-entry" role="listitem">
Álvarez, Adolfo. 2021. <span>“Plumbers, Chains, and Famous Painters: The (Updated) History of the Pipe Operator in r.”</span> <em>Adolfo Álvarez Blog</em>. <a href="http://adolfoalvarez.cl/blog/2021-09-16-plumbers-chains-and-famous-painters-the-history-of-the-pipe-operator-in-r/">http://adolfoalvarez.cl/blog/2021-09-16-plumbers-chains-and-famous-painters-the-history-of-the-pipe-operator-in-r/</a>.
</div>
<div id="ref-scherer_2022" class="csl-entry" role="listitem">
Scherer, Cédric. 2022. <span>“A Ggplot2 Tutorial for Beautiful Plotting in r.”</span> <em>Cédric Scherer Blog</em>. <a href="https://www.cedricscherer.com/2019/08/05/a-ggplot2-tutorial-for-beautiful-plotting-in-r/">https://www.cedricscherer.com/2019/08/05/a-ggplot2-tutorial-for-beautiful-plotting-in-r/</a>.
</div>
<div id="ref-wickham_2017" class="csl-entry" role="listitem">
Wickham, Hadley, and Garrett Grolemund. 2017. <em>R for Data Science: Import, Tidy, Transform, Visualize, and Model Data</em>. 1st ed. O’Reilly Media, Inc. <a href="https://r4ds.had.co.nz/">https://r4ds.had.co.nz/</a>.
</div>
</div></section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>
<ol>
<li id="fn1"><p>But it was not the first package to use it. <a href="http://adolfoalvarez.cl/blog/2021-09-16-plumbers-chains-and-famous-painters-the-history-of-the-pipe-operator-in-r/">This blog post</a> has a nice summary of the history of the pipe operator in R.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Note that there are some differences between <code>%&gt;%</code> and <code>|&gt;</code> - find more about it <em>e.g.</em> <a href="https://twitter.com/TimTeaFan/status/1582118234220007424">here</a>, <a href="http://adolfoalvarez.cl/blog/2021-09-16-plumbers-chains-and-famous-painters-the-history-of-the-pipe-operator-in-r/#base-r">here</a> or <a href="https://stackoverflow.com/questions/67633022/what-are-the-differences-between-rs-new-native-pipe-and-the-magrittr-pipe">here</a>.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>See the additional resources below if you want it differently.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>It does not make a difference here, whether we put <code>x = chr</code> or <code>x = fct</code> in the ggplot statement.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>Yes, the mean in this example is not really a mean, since there is only one number per group.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>Note that while I create two vectors in this example, this will work just as well with columns of a table via `table %&gt;% mutate(new = stringrfunction(old))`<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol></section><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{schmidt2023,
  author = {{[}Paul Schmidt{]}(https://schmidtpaul.github.io/)},
  title = {The Tidyverse},
  date = {2023-11-16},
  url = {https://schmidtpaul.github.io/dsfair_quarto//ch/rbasics/tidyverse.html},
  langid = {en},
  abstract = {Pipe (\%\textgreater\%), Tibbles, dplyr-verbs, long/wide
    format and more.}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-schmidt2023" class="csl-entry quarto-appendix-citeas" role="listitem">
[Paul Schmidt](https://schmidtpaul.github.io/). 2023. <span>“The
Tidyverse.”</span> November 16, 2023. <a href="https://schmidtpaul.github.io/dsfair_quarto//ch/rbasics/tidyverse.html">https://schmidtpaul.github.io/dsfair_quarto//ch/rbasics/tidyverse.html</a>.
</div></div></section></div></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb129" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "The tidyverse"</span></span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a><span class="an">abstract:</span><span class="co"> "Pipe (%&gt;%), Tibbles, dplyr-verbs, long/wide format and more."</span></span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb129-5"><a href="#cb129-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-8"><a href="#cb129-8" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-9"><a href="#cb129-9" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb129-10"><a href="#cb129-10" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"src/helpersrc.R"</span>))</span>
<span id="cb129-11"><a href="#cb129-11" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-12"><a href="#cb129-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-13"><a href="#cb129-13" aria-hidden="true" tabindex="-1"></a>When using R, you will sooner or later hear about the <span class="co">[</span><span class="ot">{tidyverse}</span><span class="co">](https://www.wikiwand.com/en/Tidyverse)</span>. The tidyverse is a collection of R packages that "share an underlying design philosophy, grammar, and data structures" of tidy data. The individual tidyverse packages comprise some of the most downloaded R packages.</span>
<span id="cb129-14"><a href="#cb129-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-15"><a href="#cb129-15" aria-hidden="true" tabindex="-1"></a>Install the complete tidyverse with:</span>
<span id="cb129-16"><a href="#cb129-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-19"><a href="#cb129-19" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-20"><a href="#cb129-20" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb129-21"><a href="#cb129-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-22"><a href="#cb129-22" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tidyverse"</span>)</span>
<span id="cb129-23"><a href="#cb129-23" aria-hidden="true" tabindex="-1"></a><span class="co"># or</span></span>
<span id="cb129-24"><a href="#cb129-24" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(<span class="st">"tidyverse"</span>)</span>
<span id="cb129-25"><a href="#cb129-25" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-26"><a href="#cb129-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-27"><a href="#cb129-27" aria-hidden="true" tabindex="-1"></a>|                                                                 ggplot2                                                                  |                                                                dplyr                                                                 |                                                                 tibble                                                                 |                                                                 forcats                                                                  |                                                                 stringr                                                                  |</span>
<span id="cb129-28"><a href="#cb129-28" aria-hidden="true" tabindex="-1"></a>|:-------------:|:-------------:|:-------------:|:-------------:|:-------------:|</span>
<span id="cb129-29"><a href="#cb129-29" aria-hidden="true" tabindex="-1"></a>| <span class="co">[</span><span class="ot">&lt;img src="https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/ggplot2.png" width="100"/&gt;</span><span class="co">](https://ggplot2.tidyverse.org/)</span> | <span class="co">[</span><span class="ot">&lt;img src="https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/dplyr.png" width="100"/&gt;</span><span class="co">](https://dplyr.tidyverse.org/)</span> | <span class="co">[</span><span class="ot">&lt;img src="https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/tibble.png" width="100"/&gt;</span><span class="co">](https://tibble.tidyverse.org/)</span> | <span class="co">[</span><span class="ot">&lt;img src="https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/forcats.png" width="100"/&gt;</span><span class="co">](https://forcats.tidyverse.org/)</span> | <span class="co">[</span><span class="ot">&lt;img src="https://raw.githubusercontent.com/rstudio/hex-stickers/master/PNG/stringr.png" width="100"/&gt;</span><span class="co">](https://stringr.tidyverse.org/)</span> |</span>
<span id="cb129-30"><a href="#cb129-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-31"><a href="#cb129-31" aria-hidden="true" tabindex="-1"></a>: Some of my favorite tidyverse packages</span>
<span id="cb129-32"><a href="#cb129-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-33"><a href="#cb129-33" aria-hidden="true" tabindex="-1"></a>I did not use the tidyverse packages in my first years using R, but I wish I did. While you can often reach your goal with or without using the tidyverse packages, I personally prefer using them. Thus, they are used extensively throughout the chapters of this website.</span>
<span id="cb129-34"><a href="#cb129-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-35"><a href="#cb129-35" aria-hidden="true" tabindex="-1"></a>During the next sections I will try to explain how to use some of these packages and sometimes compare them to the Base R (= non-tidyverse) alternative.</span>
<span id="cb129-36"><a href="#cb129-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-37"><a href="#cb129-37" aria-hidden="true" tabindex="-1"></a>::: {.callout-tip collapse="true"}</span>
<span id="cb129-38"><a href="#cb129-38" aria-hidden="true" tabindex="-1"></a><span class="fu">## Additional Resources</span></span>
<span id="cb129-39"><a href="#cb129-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-40"><a href="#cb129-40" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">"R for Data Science"</span><span class="co">](https://r4ds.had.co.nz/)</span> <span class="co">[</span><span class="ot">@wickham_2017</span><span class="co">]</span>, which is a book that can be read online for free and was written by the package authors themselves.</span>
<span id="cb129-41"><a href="#cb129-41" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-42"><a href="#cb129-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-43"><a href="#cb129-43" aria-hidden="true" tabindex="-1"></a><span class="fu"># Tables</span></span>
<span id="cb129-44"><a href="#cb129-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-45"><a href="#cb129-45" aria-hidden="true" tabindex="-1"></a>Finally, we can now talk about data tables with rows and columns. In R, I like to think of a table as multiple vectors side by side, so that each column is a vector.</span>
<span id="cb129-46"><a href="#cb129-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-47"><a href="#cb129-47" aria-hidden="true" tabindex="-1"></a><span class="fu">## data.frame</span></span>
<span id="cb129-48"><a href="#cb129-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-49"><a href="#cb129-49" aria-hidden="true" tabindex="-1"></a>Base R has a standard format for data tables called <span class="in">`data.frame`</span>. Here is an example table that is an R built-in, just like <span class="in">`pi`</span> is - it is called <span class="in">`PlantGrowth`</span>:</span>
<span id="cb129-50"><a href="#cb129-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-53"><a href="#cb129-53" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-54"><a href="#cb129-54" aria-hidden="true" tabindex="-1"></a>PlantGrowth</span>
<span id="cb129-55"><a href="#cb129-55" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-56"><a href="#cb129-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-57"><a href="#cb129-57" aria-hidden="true" tabindex="-1"></a>Let us create a copy of this table called <span class="in">`df`</span> (**d**ata**f**rame) and then use some helpful functions to get a first impression of this data:</span>
<span id="cb129-58"><a href="#cb129-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-61"><a href="#cb129-61" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-62"><a href="#cb129-62" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> PlantGrowth</span>
<span id="cb129-63"><a href="#cb129-63" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df)</span>
<span id="cb129-64"><a href="#cb129-64" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df)</span>
<span id="cb129-65"><a href="#cb129-65" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-66"><a href="#cb129-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-67"><a href="#cb129-67" aria-hidden="true" tabindex="-1"></a>We can see that this dataset has 30 observations (=rows) and 2 variables (=columns) and is of the type "data.frame". Furthermore, the first variable is called <span class="in">`weight`</span> and contains numeric values for which we get some measures of central tendency like the minimum, maximum, mean and median. The second variable is called <span class="in">`group`</span> and is of the type factor containing a total of three different levels, which each appear 10 times.</span>
<span id="cb129-68"><a href="#cb129-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-69"><a href="#cb129-69" aria-hidden="true" tabindex="-1"></a>If you want to extract/use values of only one column of such a data.frame, you write the name of the data.frame, then a <span class="in">`$`</span> and finally the name of the respective column. It returns the values of that column as a vector:</span>
<span id="cb129-70"><a href="#cb129-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-73"><a href="#cb129-73" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-74"><a href="#cb129-74" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>weight</span>
<span id="cb129-75"><a href="#cb129-75" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>group</span>
<span id="cb129-76"><a href="#cb129-76" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-77"><a href="#cb129-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-78"><a href="#cb129-78" aria-hidden="true" tabindex="-1"></a><span class="fu">## tibble</span></span>
<span id="cb129-79"><a href="#cb129-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-80"><a href="#cb129-80" aria-hidden="true" tabindex="-1"></a>One major aspect of the tidyverse is formatting tables as **tibble instead of data.frame**. A tibble *"is a modern reimagining of the data.frame, keeping what time has proven to be effective, and throwing out what is not."* It is super simple to convert a data.frame into a tibble, but you must have the tidyverse R package {tibble} installed and loaded - which it is if you are loading the entire {tidyverse}. Let us convert our <span class="in">`df`</span> into a tibble and call it <span class="in">`tbl`</span>:</span>
<span id="cb129-81"><a href="#cb129-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-84"><a href="#cb129-84" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-85"><a href="#cb129-85" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidyverse)</span>
<span id="cb129-86"><a href="#cb129-86" aria-hidden="true" tabindex="-1"></a>tbl <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(df)</span>
<span id="cb129-87"><a href="#cb129-87" aria-hidden="true" tabindex="-1"></a>tbl</span>
<span id="cb129-88"><a href="#cb129-88" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-89"><a href="#cb129-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-90"><a href="#cb129-90" aria-hidden="true" tabindex="-1"></a>Of course, the data itself does not change - only its format and the way it is displayed to us in R. If you compare the output we get from printing <span class="in">`tbl`</span> here to that of printing <span class="in">`df`</span> above, I would like to point out some things I find extremely convenient for tibbles:</span>
<span id="cb129-91"><a href="#cb129-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-92"><a href="#cb129-92" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>There is an extra first line telling us about the number of rows and columns.</span>
<span id="cb129-93"><a href="#cb129-93" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>There is an extra line below the column names telling us about the data type of each column.</span>
<span id="cb129-94"><a href="#cb129-94" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>Only the first ten rows of data are printed and a *"... with 20 more rows"* is added below.</span>
<span id="cb129-95"><a href="#cb129-95" aria-hidden="true" tabindex="-1"></a><span class="ss">4.  </span>It can't be seen here, but this would analogously happen if there were too many columns.</span>
<span id="cb129-96"><a href="#cb129-96" aria-hidden="true" tabindex="-1"></a><span class="ss">5.  </span>It can't be seen here, but missing values <span class="in">`NA`</span> and negative numbers are printed in red.</span>
<span id="cb129-97"><a href="#cb129-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-98"><a href="#cb129-98" aria-hidden="true" tabindex="-1"></a>Finally, note that in its heart, a tibble is still a data.frame and in most cases you can do everything with a tibble that you can do with a data.frame:</span>
<span id="cb129-99"><a href="#cb129-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-100"><a href="#cb129-100" aria-hidden="true" tabindex="-1"></a>::: columns</span>
<span id="cb129-101"><a href="#cb129-101" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-104"><a href="#cb129-104" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-105"><a href="#cb129-105" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb129-106"><a href="#cb129-106" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(tbl)</span>
<span id="cb129-107"><a href="#cb129-107" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(tbl)</span>
<span id="cb129-108"><a href="#cb129-108" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(tbl)</span>
<span id="cb129-109"><a href="#cb129-109" aria-hidden="true" tabindex="-1"></a>tbl<span class="sc">$</span>weight</span>
<span id="cb129-110"><a href="#cb129-110" aria-hidden="true" tabindex="-1"></a>tbl<span class="sc">$</span>group</span>
<span id="cb129-111"><a href="#cb129-111" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-112"><a href="#cb129-112" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-113"><a href="#cb129-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-114"><a href="#cb129-114" aria-hidden="true" tabindex="-1"></a>::: {.column width="2%"}</span>
<span id="cb129-115"><a href="#cb129-115" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-116"><a href="#cb129-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-117"><a href="#cb129-117" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-120"><a href="#cb129-120" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-121"><a href="#cb129-121" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb129-122"><a href="#cb129-122" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(df)</span>
<span id="cb129-123"><a href="#cb129-123" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df)</span>
<span id="cb129-124"><a href="#cb129-124" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df)</span>
<span id="cb129-125"><a href="#cb129-125" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>weight</span>
<span id="cb129-126"><a href="#cb129-126" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>group</span>
<span id="cb129-127"><a href="#cb129-127" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-128"><a href="#cb129-128" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-129"><a href="#cb129-129" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-130"><a href="#cb129-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-131"><a href="#cb129-131" aria-hidden="true" tabindex="-1"></a>Therefore, I almost always format my datasets as tibbles.</span>
<span id="cb129-132"><a href="#cb129-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-133"><a href="#cb129-133" aria-hidden="true" tabindex="-1"></a><span class="fu"># Plots</span></span>
<span id="cb129-134"><a href="#cb129-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-135"><a href="#cb129-135" aria-hidden="true" tabindex="-1"></a>Base R has a <span class="in">`plot()`</span> function which is good at getting some first data visualizations with very little code. It guesses what type of plot you would like to see via the data type of the respective data to be plotted:</span>
<span id="cb129-136"><a href="#cb129-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-139"><a href="#cb129-139" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-140"><a href="#cb129-140" aria-hidden="true" tabindex="-1"></a><span class="co">#| layout-ncol: 3</span></span>
<span id="cb129-141"><a href="#cb129-141" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 5</span></span>
<span id="cb129-142"><a href="#cb129-142" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 4</span></span>
<span id="cb129-143"><a href="#cb129-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-144"><a href="#cb129-144" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(df<span class="sc">$</span>weight) <span class="co"># scatter plot of values in the order they appear</span></span>
<span id="cb129-145"><a href="#cb129-145" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(df<span class="sc">$</span>group) <span class="co"># bar plot of frequency of each level</span></span>
<span id="cb129-146"><a href="#cb129-146" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> df<span class="sc">$</span>group, <span class="at">y =</span> df<span class="sc">$</span>weight) <span class="co"># boxplot for values of each level</span></span>
<span id="cb129-147"><a href="#cb129-147" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-148"><a href="#cb129-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-149"><a href="#cb129-149" aria-hidden="true" tabindex="-1"></a>However, I really just use <span class="in">`plot()`</span> to get a quick first glance at data. In order to get professional visualizations I always use the tidyverse package <span class="in">`{ggplot2}`</span> and its function <span class="in">`ggplot()`</span>. It seems like it can create any plot you can imagine and there are multiple examples with increasing complexity spread out through this website's chapters.</span>
<span id="cb129-150"><a href="#cb129-150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-151"><a href="#cb129-151" aria-hidden="true" tabindex="-1"></a>::: {.callout-tip collapse="true"}</span>
<span id="cb129-152"><a href="#cb129-152" aria-hidden="true" tabindex="-1"></a><span class="fu">## Additional Resources</span></span>
<span id="cb129-153"><a href="#cb129-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-154"><a href="#cb129-154" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Cédric Scherer's <span class="co">[</span><span class="ot">-@scherer_2022</span><span class="co">] [A ggplot2 tutorial for beautiful plotting in R]</span>(https://www.cedricscherer.com/2019/08/05/a-ggplot2-tutorial-for-beautiful-plotting-in-r/)</span>
<span id="cb129-155"><a href="#cb129-155" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">ggplot2 extensions gallery</span><span class="co">](https://exts.ggplot2.tidyverse.org/gallery/)</span></span>
<span id="cb129-156"><a href="#cb129-156" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-157"><a href="#cb129-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-158"><a href="#cb129-158" aria-hidden="true" tabindex="-1"></a><span class="fu"># The pipe operator</span></span>
<span id="cb129-159"><a href="#cb129-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-160"><a href="#cb129-160" aria-hidden="true" tabindex="-1"></a>The pipe operator *"completely changed the way how we code in R, making it more simple and readable"* <span class="co">[</span><span class="ot">@álvarez_2021</span><span class="co">]</span>. I started using the pipe as <span class="in">`%&gt;%`</span> from the {dplyr} package<span class="ot">[^1]</span>. However, since May 18, 2021 (= R 4.1.0) the pipe is officially part of Base R - although written as <span class="in">`|&gt;`</span><span class="ot">[^2]</span>.</span>
<span id="cb129-161"><a href="#cb129-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-162"><a href="#cb129-162" aria-hidden="true" tabindex="-1"></a><span class="ot">[^1]: </span>But it was not the first package to use it. <span class="co">[</span><span class="ot">This blog post</span><span class="co">](http://adolfoalvarez.cl/blog/2021-09-16-plumbers-chains-and-famous-painters-the-history-of-the-pipe-operator-in-r/)</span> has a nice summary of the history of the pipe operator in R.</span>
<span id="cb129-163"><a href="#cb129-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-164"><a href="#cb129-164" aria-hidden="true" tabindex="-1"></a><span class="ot">[^2]: </span>Note that there are some differences between <span class="in">`%&gt;%`</span> and <span class="in">`|&gt;`</span> - find more about it *e.g.* <span class="co">[</span><span class="ot">here</span><span class="co">](https://twitter.com/TimTeaFan/status/1582118234220007424)</span>, <span class="co">[</span><span class="ot">here</span><span class="co">](http://adolfoalvarez.cl/blog/2021-09-16-plumbers-chains-and-famous-painters-the-history-of-the-pipe-operator-in-r/#base-r)</span> or <span class="co">[</span><span class="ot">here</span><span class="co">](https://stackoverflow.com/questions/67633022/what-are-the-differences-between-rs-new-native-pipe-and-the-magrittr-pipe)</span>.</span>
<span id="cb129-165"><a href="#cb129-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-166"><a href="#cb129-166" aria-hidden="true" tabindex="-1"></a>To understand what makes it so great we need to start using more than one function at a time. So far, we have only used functions individually. Yet, in real life you will often find yourself having to combine multiple functions. As a fictional example, let's say that from the <span class="in">`PlantGrowth`</span> data, we want to extract a sorted vector of the square root of all weight-values that belong to the <span class="in">`ctrl`</span> group. I will show three approaches how to accomplish this</span>
<span id="cb129-167"><a href="#cb129-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-168"><a href="#cb129-168" aria-hidden="true" tabindex="-1"></a><span class="fu">## No pipe - intermediate steps</span></span>
<span id="cb129-169"><a href="#cb129-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-170"><a href="#cb129-170" aria-hidden="true" tabindex="-1"></a>Using one function at a time and saving the output in the variables <span class="in">`a`</span> - <span class="in">`d`</span>, we can do this:</span>
<span id="cb129-171"><a href="#cb129-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-174"><a href="#cb129-174" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-175"><a href="#cb129-175" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">filter</span>(PlantGrowth, group <span class="sc">==</span> <span class="st">"ctrl"</span>)</span>
<span id="cb129-176"><a href="#cb129-176" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">pull</span>(a, weight) <span class="co"># same as: b &lt;- a$weight</span></span>
<span id="cb129-177"><a href="#cb129-177" aria-hidden="true" tabindex="-1"></a>c <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(b)</span>
<span id="cb129-178"><a href="#cb129-178" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">round</span>(c, <span class="at">digits =</span> <span class="dv">1</span>)</span>
<span id="cb129-179"><a href="#cb129-179" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(d)</span>
<span id="cb129-180"><a href="#cb129-180" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-181"><a href="#cb129-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-182"><a href="#cb129-182" aria-hidden="true" tabindex="-1"></a><span class="fu">## No pipe - nesting functions</span></span>
<span id="cb129-183"><a href="#cb129-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-184"><a href="#cb129-184" aria-hidden="true" tabindex="-1"></a>Just like in MS Excel, it is possible to write functions inside of functions so that we can do this:</span>
<span id="cb129-185"><a href="#cb129-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-188"><a href="#cb129-188" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-189"><a href="#cb129-189" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">round</span>(<span class="fu">sqrt</span>(<span class="fu">pull</span>(<span class="fu">filter</span>(PlantGrowth, group <span class="sc">==</span> <span class="st">"ctrl"</span>), weight)), <span class="at">digits =</span> <span class="dv">1</span>))</span>
<span id="cb129-190"><a href="#cb129-190" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-191"><a href="#cb129-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-192"><a href="#cb129-192" aria-hidden="true" tabindex="-1"></a><span class="fu">## Pipe!</span></span>
<span id="cb129-193"><a href="#cb129-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-194"><a href="#cb129-194" aria-hidden="true" tabindex="-1"></a>This approach (i) allows you to write functions from left to right / top to bottom and thus in the order they are executed and the way you think about them and (ii) does not create extra variables for intermediate steps:</span>
<span id="cb129-195"><a href="#cb129-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-198"><a href="#cb129-198" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-199"><a href="#cb129-199" aria-hidden="true" tabindex="-1"></a>PlantGrowth <span class="sc">%&gt;%</span> </span>
<span id="cb129-200"><a href="#cb129-200" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(group <span class="sc">==</span> <span class="st">"ctrl"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb129-201"><a href="#cb129-201" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(weight) <span class="sc">%&gt;%</span> </span>
<span id="cb129-202"><a href="#cb129-202" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sqrt</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb129-203"><a href="#cb129-203" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(<span class="at">digits =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb129-204"><a href="#cb129-204" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sort</span>()</span>
<span id="cb129-205"><a href="#cb129-205" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-206"><a href="#cb129-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-207"><a href="#cb129-207" aria-hidden="true" tabindex="-1"></a>You can think about it like this: Something (in this case the <span class="in">`PlantGrowth`</span> data.frame) goes into the pipe and is directed to the next function <span class="in">`filter()`</span>. By default, this function takes what came out of the previous pipe and puts it as its first argument. This happens with every pipe. You'll notice that all the functions who required two arguments above, now only need one argument, *i.e.* the additional argument, because the main argument stating which data is to be used is by default simply what came out of the previous pipe. Accordingly, the functions <span class="in">`sqrt()`</span> and <span class="in">`sort()`</span> appear empty here, because they only need one piece of information and that is which data they should work with. Finally note that you can easily highlight only some of the lines up until one of the pipes to see the intermediate results.</span>
<span id="cb129-208"><a href="#cb129-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-209"><a href="#cb129-209" aria-hidden="true" tabindex="-1"></a>::: callout-note</span>
<span id="cb129-210"><a href="#cb129-210" aria-hidden="true" tabindex="-1"></a>The keyboard shortcut for writing <span class="in">`%&gt;%`</span> in RStudio is **CTRL+SHIFT+M**. Keyboard shortcuts can be customized in RStudio as described <span class="co">[</span><span class="ot">here</span><span class="co">](https://support.rstudio.com/hc/en-us/articles/206382178-Customizing-Keyboard-Shortcuts-in-the-RStudio-IDE)</span>.</span>
<span id="cb129-211"><a href="#cb129-211" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-212"><a href="#cb129-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-213"><a href="#cb129-213" aria-hidden="true" tabindex="-1"></a><span class="fu"># dplyr verbs</span></span>
<span id="cb129-214"><a href="#cb129-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-215"><a href="#cb129-215" aria-hidden="true" tabindex="-1"></a>Taken directly from <span class="co">[</span><span class="ot">the documentation</span><span class="co">](https://dplyr.tidyverse.org/)</span>:</span>
<span id="cb129-216"><a href="#cb129-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-217"><a href="#cb129-217" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; {dplyr} is a grammar of data manipulation, providing a consistent set of verbs that help you solve the most common data manipulation challenges:</span></span>
<span id="cb129-218"><a href="#cb129-218" aria-hidden="true" tabindex="-1"></a><span class="at">&gt;</span></span>
<span id="cb129-219"><a href="#cb129-219" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; -   </span><span class="in">`mutate()`</span><span class="at"> adds new variables that are functions of existing variables.</span></span>
<span id="cb129-220"><a href="#cb129-220" aria-hidden="true" tabindex="-1"></a><span class="at">&gt;</span></span>
<span id="cb129-221"><a href="#cb129-221" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; -   </span><span class="in">`select()`</span><span class="at"> picks variables based on their names.</span></span>
<span id="cb129-222"><a href="#cb129-222" aria-hidden="true" tabindex="-1"></a><span class="at">&gt;</span></span>
<span id="cb129-223"><a href="#cb129-223" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; -   </span><span class="in">`filter()`</span><span class="at"> picks cases based on their values.</span></span>
<span id="cb129-224"><a href="#cb129-224" aria-hidden="true" tabindex="-1"></a><span class="at">&gt;</span></span>
<span id="cb129-225"><a href="#cb129-225" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; -   </span><span class="in">`summarise()`</span><span class="at"> reduces multiple values down to a single summary.</span></span>
<span id="cb129-226"><a href="#cb129-226" aria-hidden="true" tabindex="-1"></a><span class="at">&gt;</span></span>
<span id="cb129-227"><a href="#cb129-227" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; -   </span><span class="in">`arrange()`</span><span class="at"> changes the ordering of the rows.</span></span>
<span id="cb129-228"><a href="#cb129-228" aria-hidden="true" tabindex="-1"></a><span class="at">&gt;</span></span>
<span id="cb129-229"><a href="#cb129-229" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; These all combine naturally with </span><span class="in">`group_by()`</span><span class="at"> which allows you to perform any operation "by group". If you are new to dplyr, the best place to start is </span><span class="co">[</span><span class="ot">the data transformation chapter</span><span class="co">](https://r4ds.had.co.nz/transform.html)</span><span class="at"> in *R for data science* </span><span class="co">[</span><span class="ot">@wickham_2017</span><span class="co">]</span><span class="at">.</span></span>
<span id="cb129-230"><a href="#cb129-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-231"><a href="#cb129-231" aria-hidden="true" tabindex="-1"></a>In my experience you really can do most of the data manipulation before and after the actual statistics with these functions. In other words, it is exactly these functions who can and should replace the manual work you may currently even be doing in MS Excel. In the following sections I will give very brief examples of how to use these functions while always pointing to more thorough resources.</span>
<span id="cb129-232"><a href="#cb129-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-233"><a href="#cb129-233" aria-hidden="true" tabindex="-1"></a><span class="fu">## mutate()</span></span>
<span id="cb129-234"><a href="#cb129-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-235"><a href="#cb129-235" aria-hidden="true" tabindex="-1"></a>This function is useful whenever you want to change existing columns or add new columns to your table. To keep the following examples short and simple, let's create <span class="in">`tbl2`</span> as only the first six rows of <span class="in">`tbl`</span> via the <span class="in">`head()`</span> function:</span>
<span id="cb129-236"><a href="#cb129-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-239"><a href="#cb129-239" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-240"><a href="#cb129-240" aria-hidden="true" tabindex="-1"></a>tbl2 <span class="ot">&lt;-</span> <span class="fu">head</span>(tbl)</span>
<span id="cb129-241"><a href="#cb129-241" aria-hidden="true" tabindex="-1"></a>tbl2</span>
<span id="cb129-242"><a href="#cb129-242" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-243"><a href="#cb129-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-244"><a href="#cb129-244" aria-hidden="true" tabindex="-1"></a>Let's start by adding 2 to the <span class="in">`weight`</span> in our data. Below, we do this two different ways: by adding a column named <span class="in">`new`</span> to the dataset (left) and by replacing/overwriting the original <span class="in">`weight`</span> column (right):</span>
<span id="cb129-245"><a href="#cb129-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-246"><a href="#cb129-246" aria-hidden="true" tabindex="-1"></a>::: columns</span>
<span id="cb129-247"><a href="#cb129-247" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-250"><a href="#cb129-250" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-251"><a href="#cb129-251" aria-hidden="true" tabindex="-1"></a>tbl2 <span class="sc">%&gt;%</span> </span>
<span id="cb129-252"><a href="#cb129-252" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">new =</span> weight <span class="sc">+</span> <span class="dv">2</span>)</span>
<span id="cb129-253"><a href="#cb129-253" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-254"><a href="#cb129-254" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-255"><a href="#cb129-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-256"><a href="#cb129-256" aria-hidden="true" tabindex="-1"></a>::: {.column width="2%"}</span>
<span id="cb129-257"><a href="#cb129-257" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-258"><a href="#cb129-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-259"><a href="#cb129-259" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-262"><a href="#cb129-262" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-263"><a href="#cb129-263" aria-hidden="true" tabindex="-1"></a>tbl2 <span class="sc">%&gt;%</span> </span>
<span id="cb129-264"><a href="#cb129-264" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">weight =</span> weight <span class="sc">+</span> <span class="dv">2</span>)</span>
<span id="cb129-265"><a href="#cb129-265" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-266"><a href="#cb129-266" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-267"><a href="#cb129-267" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-268"><a href="#cb129-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-269"><a href="#cb129-269" aria-hidden="true" tabindex="-1"></a>We can also create multiple columns at once (left) and make the values of the new column dynamically depend on the other columns via <span class="in">`case_when()`</span> (right):</span>
<span id="cb129-270"><a href="#cb129-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-271"><a href="#cb129-271" aria-hidden="true" tabindex="-1"></a>::: columns</span>
<span id="cb129-272"><a href="#cb129-272" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-275"><a href="#cb129-275" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-276"><a href="#cb129-276" aria-hidden="true" tabindex="-1"></a>tbl2 <span class="sc">%&gt;%</span></span>
<span id="cb129-277"><a href="#cb129-277" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb129-278"><a href="#cb129-278" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Name with Space</span><span class="st">`</span> <span class="ot">=</span> <span class="st">"Hello!"</span>,</span>
<span id="cb129-279"><a href="#cb129-279" aria-hidden="true" tabindex="-1"></a>    <span class="at">number10 =</span> <span class="dv">10</span></span>
<span id="cb129-280"><a href="#cb129-280" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb129-281"><a href="#cb129-281" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-282"><a href="#cb129-282" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-283"><a href="#cb129-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-284"><a href="#cb129-284" aria-hidden="true" tabindex="-1"></a>::: {.column width="2%"}</span>
<span id="cb129-285"><a href="#cb129-285" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-286"><a href="#cb129-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-287"><a href="#cb129-287" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-290"><a href="#cb129-290" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-291"><a href="#cb129-291" aria-hidden="true" tabindex="-1"></a>tbl2 <span class="sc">%&gt;%</span> </span>
<span id="cb129-292"><a href="#cb129-292" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">size =</span> <span class="fu">case_when</span>(</span>
<span id="cb129-293"><a href="#cb129-293" aria-hidden="true" tabindex="-1"></a>    weight <span class="sc">&gt;</span> <span class="fl">5.5</span> <span class="sc">~</span> <span class="st">"large"</span>,</span>
<span id="cb129-294"><a href="#cb129-294" aria-hidden="true" tabindex="-1"></a>    weight <span class="sc">&lt;</span> <span class="fl">4.5</span> <span class="sc">~</span> <span class="st">"small"</span>,</span>
<span id="cb129-295"><a href="#cb129-295" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"normal"</span> <span class="co"># everything else</span></span>
<span id="cb129-296"><a href="#cb129-296" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb129-297"><a href="#cb129-297" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-298"><a href="#cb129-298" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-299"><a href="#cb129-299" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-300"><a href="#cb129-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-301"><a href="#cb129-301" aria-hidden="true" tabindex="-1"></a>Finally, we can efficiently apply the same function to multiple columns at once via <span class="in">`across()`</span>. We can select the columns e.g. manually via their names in a vector (left) or via a function such as <span class="in">`is.numeric`</span> (right):</span>
<span id="cb129-302"><a href="#cb129-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-303"><a href="#cb129-303" aria-hidden="true" tabindex="-1"></a>::: columns</span>
<span id="cb129-304"><a href="#cb129-304" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-307"><a href="#cb129-307" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-308"><a href="#cb129-308" aria-hidden="true" tabindex="-1"></a>tbl2 <span class="sc">%&gt;%</span></span>
<span id="cb129-309"><a href="#cb129-309" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">v1 =</span> <span class="dv">1</span>, <span class="at">v2 =</span> <span class="dv">2</span>, <span class="at">v3 =</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb129-310"><a href="#cb129-310" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb129-311"><a href="#cb129-311" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">c</span>(v1, v2), <span class="sc">~</span> .x <span class="sc">+</span> <span class="dv">20</span>)</span>
<span id="cb129-312"><a href="#cb129-312" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb129-313"><a href="#cb129-313" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-314"><a href="#cb129-314" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-315"><a href="#cb129-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-316"><a href="#cb129-316" aria-hidden="true" tabindex="-1"></a>::: {.column width="2%"}</span>
<span id="cb129-317"><a href="#cb129-317" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-318"><a href="#cb129-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-319"><a href="#cb129-319" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-322"><a href="#cb129-322" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-323"><a href="#cb129-323" aria-hidden="true" tabindex="-1"></a>tbl2 <span class="sc">%&gt;%</span></span>
<span id="cb129-324"><a href="#cb129-324" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">v1 =</span> <span class="dv">1</span>, <span class="at">v2 =</span> <span class="dv">2</span>, <span class="at">v3 =</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb129-325"><a href="#cb129-325" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb129-326"><a href="#cb129-326" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="sc">~</span> .x <span class="sc">+</span> <span class="dv">20</span>)</span>
<span id="cb129-327"><a href="#cb129-327" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb129-328"><a href="#cb129-328" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-329"><a href="#cb129-329" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-330"><a href="#cb129-330" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-331"><a href="#cb129-331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-332"><a href="#cb129-332" aria-hidden="true" tabindex="-1"></a>::: {.callout-tip collapse="true"}</span>
<span id="cb129-333"><a href="#cb129-333" aria-hidden="true" tabindex="-1"></a><span class="fu">## Additional Resources</span></span>
<span id="cb129-334"><a href="#cb129-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-335"><a href="#cb129-335" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">5.5 Add new variables with mutate()</span><span class="co">](https://r4ds.had.co.nz/transform.html#add-new-variables-with-mutate)</span> in *R for data science* <span class="co">[</span><span class="ot">@wickham_2017</span><span class="co">]</span></span>
<span id="cb129-336"><a href="#cb129-336" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Create, modify, and delete columns with mutate()</span><span class="co">](https://dplyr.tidyverse.org/reference/mutate.html)</span></span>
<span id="cb129-337"><a href="#cb129-337" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">A general vectorised if with case_when()</span><span class="co">](https://dplyr.tidyverse.org/reference/case_when.html)</span></span>
<span id="cb129-338"><a href="#cb129-338" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Apply a function (or functions) across multiple columns with across()</span><span class="co">](https://dplyr.tidyverse.org/reference/across.html)</span></span>
<span id="cb129-339"><a href="#cb129-339" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-340"><a href="#cb129-340" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-341"><a href="#cb129-341" aria-hidden="true" tabindex="-1"></a><span class="fu">## select()</span></span>
<span id="cb129-342"><a href="#cb129-342" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-343"><a href="#cb129-343" aria-hidden="true" tabindex="-1"></a>This function is useful whenever you want to select a subset of columns or change the order of columns. To provide better examples, let's first create a table <span class="in">`tbl3`</span> with a few more columns:</span>
<span id="cb129-344"><a href="#cb129-344" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-347"><a href="#cb129-347" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-348"><a href="#cb129-348" aria-hidden="true" tabindex="-1"></a>tbl3 <span class="ot">&lt;-</span> tbl2 <span class="sc">%&gt;%</span> </span>
<span id="cb129-349"><a href="#cb129-349" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">var1 =</span> <span class="dv">1</span>, <span class="at">var2 =</span> <span class="dv">2</span>, <span class="at">var3 =</span> <span class="st">"text"</span>, <span class="at">var4 =</span> <span class="st">"word"</span>)</span>
<span id="cb129-350"><a href="#cb129-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-351"><a href="#cb129-351" aria-hidden="true" tabindex="-1"></a>tbl3</span>
<span id="cb129-352"><a href="#cb129-352" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-353"><a href="#cb129-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-354"><a href="#cb129-354" aria-hidden="true" tabindex="-1"></a>We can now select individual columns manually by giving all names (left) and even select all columns <span class="in">`from:to`</span> by writing a colon between them (right):</span>
<span id="cb129-355"><a href="#cb129-355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-356"><a href="#cb129-356" aria-hidden="true" tabindex="-1"></a>::: columns</span>
<span id="cb129-357"><a href="#cb129-357" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-360"><a href="#cb129-360" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-361"><a href="#cb129-361" aria-hidden="true" tabindex="-1"></a>tbl3 <span class="sc">%&gt;%</span> </span>
<span id="cb129-362"><a href="#cb129-362" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(group, var1, var4)</span>
<span id="cb129-363"><a href="#cb129-363" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-364"><a href="#cb129-364" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-365"><a href="#cb129-365" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-366"><a href="#cb129-366" aria-hidden="true" tabindex="-1"></a>::: {.column width="2%"}</span>
<span id="cb129-367"><a href="#cb129-367" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-368"><a href="#cb129-368" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-369"><a href="#cb129-369" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-372"><a href="#cb129-372" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-373"><a href="#cb129-373" aria-hidden="true" tabindex="-1"></a>tbl3 <span class="sc">%&gt;%</span> </span>
<span id="cb129-374"><a href="#cb129-374" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(group, var1<span class="sc">:</span>var4)</span>
<span id="cb129-375"><a href="#cb129-375" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-376"><a href="#cb129-376" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-377"><a href="#cb129-377" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-378"><a href="#cb129-378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-379"><a href="#cb129-379" aria-hidden="true" tabindex="-1"></a>We can also delete specific columns by putting a <span class="in">`-`</span> in fornt of their name or use functions like <span class="in">`starts_with()`</span>, <span class="in">`ends_with()`</span>, <span class="in">`contains()`</span>, <span class="in">`matches()`</span> and <span class="in">`num_range()`</span> to select all columns based on (parts of) their name:</span>
<span id="cb129-380"><a href="#cb129-380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-381"><a href="#cb129-381" aria-hidden="true" tabindex="-1"></a>::: columns</span>
<span id="cb129-382"><a href="#cb129-382" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-385"><a href="#cb129-385" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-386"><a href="#cb129-386" aria-hidden="true" tabindex="-1"></a>tbl3 <span class="sc">%&gt;%</span> </span>
<span id="cb129-387"><a href="#cb129-387" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>group)</span>
<span id="cb129-388"><a href="#cb129-388" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-389"><a href="#cb129-389" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-390"><a href="#cb129-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-391"><a href="#cb129-391" aria-hidden="true" tabindex="-1"></a>::: {.column width="2%"}</span>
<span id="cb129-392"><a href="#cb129-392" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-393"><a href="#cb129-393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-394"><a href="#cb129-394" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-397"><a href="#cb129-397" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-398"><a href="#cb129-398" aria-hidden="true" tabindex="-1"></a>tbl3 <span class="sc">%&gt;%</span> </span>
<span id="cb129-399"><a href="#cb129-399" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">"r"</span>))</span>
<span id="cb129-400"><a href="#cb129-400" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-401"><a href="#cb129-401" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-402"><a href="#cb129-402" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-403"><a href="#cb129-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-404"><a href="#cb129-404" aria-hidden="true" tabindex="-1"></a>Finally, we can select based on a function like <span class="in">`is.numeric`</span> via <span class="in">`where()`</span> (left) or simply rearrange while keeping all columns by using <span class="in">`everything()`</span> (right)</span>
<span id="cb129-405"><a href="#cb129-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-406"><a href="#cb129-406" aria-hidden="true" tabindex="-1"></a>::: columns</span>
<span id="cb129-407"><a href="#cb129-407" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-410"><a href="#cb129-410" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-411"><a href="#cb129-411" aria-hidden="true" tabindex="-1"></a>tbl3 <span class="sc">%&gt;%</span> </span>
<span id="cb129-412"><a href="#cb129-412" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric))</span>
<span id="cb129-413"><a href="#cb129-413" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-414"><a href="#cb129-414" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-415"><a href="#cb129-415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-416"><a href="#cb129-416" aria-hidden="true" tabindex="-1"></a>::: {.column width="2%"}</span>
<span id="cb129-417"><a href="#cb129-417" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-418"><a href="#cb129-418" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-419"><a href="#cb129-419" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-422"><a href="#cb129-422" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-423"><a href="#cb129-423" aria-hidden="true" tabindex="-1"></a>tbl3 <span class="sc">%&gt;%</span> </span>
<span id="cb129-424"><a href="#cb129-424" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(var1, <span class="fu">everything</span>())</span>
<span id="cb129-425"><a href="#cb129-425" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-426"><a href="#cb129-426" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-427"><a href="#cb129-427" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-428"><a href="#cb129-428" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-429"><a href="#cb129-429" aria-hidden="true" tabindex="-1"></a>::: {.callout-tip collapse="true"}</span>
<span id="cb129-430"><a href="#cb129-430" aria-hidden="true" tabindex="-1"></a><span class="fu">## Additional Resources</span></span>
<span id="cb129-431"><a href="#cb129-431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-432"><a href="#cb129-432" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">5.4 Select columns with select()</span><span class="co">](https://r4ds.had.co.nz/transform.html#select)</span> in *R for data science* <span class="co">[</span><span class="ot">@wickham_2017</span><span class="co">]</span></span>
<span id="cb129-433"><a href="#cb129-433" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Subset columns using their names and types with select()</span><span class="co">](https://dplyr.tidyverse.org/reference/select.html)</span></span>
<span id="cb129-434"><a href="#cb129-434" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Select variables that match a pattern with starts_with() etc.</span><span class="co">](https://tidyselect.r-lib.org/reference/starts_with.html)</span></span>
<span id="cb129-435"><a href="#cb129-435" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Select variables with a function with where()</span><span class="co">](https://tidyselect.r-lib.org/reference/where.html)</span></span>
<span id="cb129-436"><a href="#cb129-436" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-437"><a href="#cb129-437" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-438"><a href="#cb129-438" aria-hidden="true" tabindex="-1"></a><span class="fu">## filter()</span></span>
<span id="cb129-439"><a href="#cb129-439" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-440"><a href="#cb129-440" aria-hidden="true" tabindex="-1"></a>This function is useful whenever you want to subset rows based on their values. Note that for the examples here, we use the original <span class="in">`tbl`</span> with 30 observations.</span>
<span id="cb129-441"><a href="#cb129-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-442"><a href="#cb129-442" aria-hidden="true" tabindex="-1"></a>Let's immediately filter for two conditions: Observations that belong to group <span class="in">`trt2`</span> **and** (`&amp;`) are larger than 6 (left); Observations that are larger than 6 **or** (<span class="in">`|`</span>) smaller than 4 (right):</span>
<span id="cb129-443"><a href="#cb129-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-444"><a href="#cb129-444" aria-hidden="true" tabindex="-1"></a>::: columns</span>
<span id="cb129-445"><a href="#cb129-445" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-448"><a href="#cb129-448" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-449"><a href="#cb129-449" aria-hidden="true" tabindex="-1"></a>tbl <span class="sc">%&gt;%</span> </span>
<span id="cb129-450"><a href="#cb129-450" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(weight <span class="sc">&gt;</span> <span class="dv">6</span> <span class="sc">&amp;</span> group <span class="sc">==</span> <span class="st">"trt2"</span>)</span>
<span id="cb129-451"><a href="#cb129-451" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-452"><a href="#cb129-452" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-453"><a href="#cb129-453" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-454"><a href="#cb129-454" aria-hidden="true" tabindex="-1"></a>::: {.column width="2%"}</span>
<span id="cb129-455"><a href="#cb129-455" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-456"><a href="#cb129-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-457"><a href="#cb129-457" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-460"><a href="#cb129-460" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-461"><a href="#cb129-461" aria-hidden="true" tabindex="-1"></a>tbl <span class="sc">%&gt;%</span> </span>
<span id="cb129-462"><a href="#cb129-462" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(weight <span class="sc">&gt;</span> <span class="dv">6</span> <span class="sc">|</span> weight <span class="sc">&lt;</span> <span class="dv">4</span>)</span>
<span id="cb129-463"><a href="#cb129-463" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-464"><a href="#cb129-464" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-465"><a href="#cb129-465" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-466"><a href="#cb129-466" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-467"><a href="#cb129-467" aria-hidden="true" tabindex="-1"></a>Instead of writing a lot of conditions separated by <span class="in">`|`</span>, it is often more efficient to use <span class="in">`%in%`</span>:</span>
<span id="cb129-468"><a href="#cb129-468" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-469"><a href="#cb129-469" aria-hidden="true" tabindex="-1"></a>::: columns</span>
<span id="cb129-470"><a href="#cb129-470" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-473"><a href="#cb129-473" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-474"><a href="#cb129-474" aria-hidden="true" tabindex="-1"></a>tbl <span class="sc">%&gt;%</span> </span>
<span id="cb129-475"><a href="#cb129-475" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(group <span class="sc">==</span> <span class="st">"trt1"</span> <span class="sc">|</span> group <span class="sc">==</span> <span class="st">"trt2"</span>)</span>
<span id="cb129-476"><a href="#cb129-476" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-477"><a href="#cb129-477" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-478"><a href="#cb129-478" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-479"><a href="#cb129-479" aria-hidden="true" tabindex="-1"></a>::: {.column width="2%"}</span>
<span id="cb129-480"><a href="#cb129-480" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-481"><a href="#cb129-481" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-482"><a href="#cb129-482" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-485"><a href="#cb129-485" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-486"><a href="#cb129-486" aria-hidden="true" tabindex="-1"></a>tbl <span class="sc">%&gt;%</span> </span>
<span id="cb129-487"><a href="#cb129-487" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(group <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"trt1"</span>, <span class="st">"trt2"</span>))</span>
<span id="cb129-488"><a href="#cb129-488" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-489"><a href="#cb129-489" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-490"><a href="#cb129-490" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-491"><a href="#cb129-491" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-492"><a href="#cb129-492" aria-hidden="true" tabindex="-1"></a>We can also filter for values that **are not** of the <span class="in">`ctrl`</span> group (left) or that are larger than the mean weight (right):</span>
<span id="cb129-493"><a href="#cb129-493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-494"><a href="#cb129-494" aria-hidden="true" tabindex="-1"></a>::: columns</span>
<span id="cb129-495"><a href="#cb129-495" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-498"><a href="#cb129-498" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-499"><a href="#cb129-499" aria-hidden="true" tabindex="-1"></a>tbl <span class="sc">%&gt;%</span> </span>
<span id="cb129-500"><a href="#cb129-500" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(group <span class="sc">!=</span> <span class="st">"ctrl"</span>)</span>
<span id="cb129-501"><a href="#cb129-501" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-502"><a href="#cb129-502" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-503"><a href="#cb129-503" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-504"><a href="#cb129-504" aria-hidden="true" tabindex="-1"></a>::: {.column width="2%"}</span>
<span id="cb129-505"><a href="#cb129-505" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-506"><a href="#cb129-506" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-507"><a href="#cb129-507" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-510"><a href="#cb129-510" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-511"><a href="#cb129-511" aria-hidden="true" tabindex="-1"></a>tbl <span class="sc">%&gt;%</span> </span>
<span id="cb129-512"><a href="#cb129-512" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(weight <span class="sc">&gt;</span> <span class="fu">mean</span>(weight))</span>
<span id="cb129-513"><a href="#cb129-513" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-514"><a href="#cb129-514" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-515"><a href="#cb129-515" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-516"><a href="#cb129-516" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-517"><a href="#cb129-517" aria-hidden="true" tabindex="-1"></a>::: {.callout-tip collapse="true"}</span>
<span id="cb129-518"><a href="#cb129-518" aria-hidden="true" tabindex="-1"></a><span class="fu">## Additional Resources</span></span>
<span id="cb129-519"><a href="#cb129-519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-520"><a href="#cb129-520" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">5.2 Filter rows with filter()</span><span class="co">](https://r4ds.had.co.nz/transform.html#filter-rows-with-filter)</span> in *R for data science* <span class="co">[</span><span class="ot">@wickham_2017</span><span class="co">]</span></span>
<span id="cb129-521"><a href="#cb129-521" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Subset rows using column values with filter()</span><span class="co">](https://dplyr.tidyverse.org/reference/filter.html)</span></span>
<span id="cb129-522"><a href="#cb129-522" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-523"><a href="#cb129-523" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-524"><a href="#cb129-524" aria-hidden="true" tabindex="-1"></a><span class="fu">## arrange()</span></span>
<span id="cb129-525"><a href="#cb129-525" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-526"><a href="#cb129-526" aria-hidden="true" tabindex="-1"></a>This function is useful whenever you want to sort rows based on their values. We'll once more create a new version of our original dataset to best show what this function can do:</span>
<span id="cb129-527"><a href="#cb129-527" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-530"><a href="#cb129-530" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-531"><a href="#cb129-531" aria-hidden="true" tabindex="-1"></a>tbl4 <span class="ot">&lt;-</span> tbl <span class="sc">%&gt;%</span></span>
<span id="cb129-532"><a href="#cb129-532" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">11</span><span class="sc">:</span><span class="dv">13</span>, <span class="dv">21</span><span class="sc">:</span><span class="dv">23</span>) </span>
<span id="cb129-533"><a href="#cb129-533" aria-hidden="true" tabindex="-1"></a><span class="co"># this keeps only rows 1,2,3,11,12,13,21,22,23</span></span>
<span id="cb129-534"><a href="#cb129-534" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-535"><a href="#cb129-535" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-536"><a href="#cb129-536" aria-hidden="true" tabindex="-1"></a>We can arrange rows via writing the column name (or column index/number). Note that by default values are sorted in ascending order and strings are sorted alphabetically, but this can be reversed by using <span class="in">`desc()`</span>:</span>
<span id="cb129-537"><a href="#cb129-537" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-538"><a href="#cb129-538" aria-hidden="true" tabindex="-1"></a>::: columns</span>
<span id="cb129-539"><a href="#cb129-539" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-542"><a href="#cb129-542" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-543"><a href="#cb129-543" aria-hidden="true" tabindex="-1"></a>tbl4 <span class="sc">%&gt;%</span> </span>
<span id="cb129-544"><a href="#cb129-544" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(weight)</span>
<span id="cb129-545"><a href="#cb129-545" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-546"><a href="#cb129-546" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-547"><a href="#cb129-547" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-548"><a href="#cb129-548" aria-hidden="true" tabindex="-1"></a>::: {.column width="2%"}</span>
<span id="cb129-549"><a href="#cb129-549" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-550"><a href="#cb129-550" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-551"><a href="#cb129-551" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-554"><a href="#cb129-554" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-555"><a href="#cb129-555" aria-hidden="true" tabindex="-1"></a>tbl4 <span class="sc">%&gt;%</span> </span>
<span id="cb129-556"><a href="#cb129-556" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(weight))</span>
<span id="cb129-557"><a href="#cb129-557" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-558"><a href="#cb129-558" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-559"><a href="#cb129-559" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-560"><a href="#cb129-560" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-561"><a href="#cb129-561" aria-hidden="true" tabindex="-1"></a>You can also sort via multiple columns and you can provide a custom sorting order in a vector:</span>
<span id="cb129-562"><a href="#cb129-562" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-563"><a href="#cb129-563" aria-hidden="true" tabindex="-1"></a>::: columns</span>
<span id="cb129-564"><a href="#cb129-564" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-567"><a href="#cb129-567" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-568"><a href="#cb129-568" aria-hidden="true" tabindex="-1"></a>tbl4 <span class="sc">%&gt;%</span> </span>
<span id="cb129-569"><a href="#cb129-569" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(group, weight)</span>
<span id="cb129-570"><a href="#cb129-570" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-571"><a href="#cb129-571" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-572"><a href="#cb129-572" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-573"><a href="#cb129-573" aria-hidden="true" tabindex="-1"></a>::: {.column width="2%"}</span>
<span id="cb129-574"><a href="#cb129-574" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-575"><a href="#cb129-575" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-576"><a href="#cb129-576" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-579"><a href="#cb129-579" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-580"><a href="#cb129-580" aria-hidden="true" tabindex="-1"></a>myorder <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"trt1"</span>, <span class="st">"ctrl"</span>, <span class="st">"trt2"</span>)</span>
<span id="cb129-581"><a href="#cb129-581" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-582"><a href="#cb129-582" aria-hidden="true" tabindex="-1"></a>tbl4 <span class="sc">%&gt;%</span> </span>
<span id="cb129-583"><a href="#cb129-583" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(</span>
<span id="cb129-584"><a href="#cb129-584" aria-hidden="true" tabindex="-1"></a>    <span class="fu">match</span>(group, myorder), </span>
<span id="cb129-585"><a href="#cb129-585" aria-hidden="true" tabindex="-1"></a>    weight</span>
<span id="cb129-586"><a href="#cb129-586" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb129-587"><a href="#cb129-587" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-588"><a href="#cb129-588" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-589"><a href="#cb129-589" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-590"><a href="#cb129-590" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-591"><a href="#cb129-591" aria-hidden="true" tabindex="-1"></a>Note that <span class="in">`NA`</span> (= missing values) are always sorted to the end<span class="ot">[^3]</span>, even when using <span class="in">`desc()`</span>.</span>
<span id="cb129-592"><a href="#cb129-592" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-593"><a href="#cb129-593" aria-hidden="true" tabindex="-1"></a><span class="ot">[^3]: </span>See the additional resources below if you want it differently.</span>
<span id="cb129-594"><a href="#cb129-594" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-595"><a href="#cb129-595" aria-hidden="true" tabindex="-1"></a>::: {.callout-tip collapse="true"}</span>
<span id="cb129-596"><a href="#cb129-596" aria-hidden="true" tabindex="-1"></a><span class="fu">## Additional Resources</span></span>
<span id="cb129-597"><a href="#cb129-597" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-598"><a href="#cb129-598" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">5.3 Arrange rows with arrange()</span><span class="co">](https://r4ds.had.co.nz/transform.html#arrange-rows-with-arrange)</span> in *R for data science* <span class="co">[</span><span class="ot">@wickham_2017</span><span class="co">]</span></span>
<span id="cb129-599"><a href="#cb129-599" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Arrange rows by column values with arrange()</span><span class="co">](https://dplyr.tidyverse.org/reference/arrange.html)</span></span>
<span id="cb129-600"><a href="#cb129-600" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">How to have NA's displayed first using arrange()</span><span class="co">](https://stackoverflow.com/a/25267681/8830099)</span></span>
<span id="cb129-601"><a href="#cb129-601" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-602"><a href="#cb129-602" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-603"><a href="#cb129-603" aria-hidden="true" tabindex="-1"></a><span class="fu">## summarise()</span></span>
<span id="cb129-604"><a href="#cb129-604" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-605"><a href="#cb129-605" aria-hidden="true" tabindex="-1"></a>This function can be useful whenever you want to summarise data. Yet, it is not very useful (left) unless it is paired with <span class="in">`group_by()`</span> (right).</span>
<span id="cb129-606"><a href="#cb129-606" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-607"><a href="#cb129-607" aria-hidden="true" tabindex="-1"></a>::: columns</span>
<span id="cb129-608"><a href="#cb129-608" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-611"><a href="#cb129-611" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-612"><a href="#cb129-612" aria-hidden="true" tabindex="-1"></a>tbl <span class="sc">%&gt;%</span> </span>
<span id="cb129-613"><a href="#cb129-613" aria-hidden="true" tabindex="-1"></a>  <span class="co"># no group_by </span></span>
<span id="cb129-614"><a href="#cb129-614" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">my_mean =</span> <span class="fu">mean</span>(weight))</span>
<span id="cb129-615"><a href="#cb129-615" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-616"><a href="#cb129-616" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-617"><a href="#cb129-617" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-618"><a href="#cb129-618" aria-hidden="true" tabindex="-1"></a>::: {.column width="2%"}</span>
<span id="cb129-619"><a href="#cb129-619" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-620"><a href="#cb129-620" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-621"><a href="#cb129-621" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-624"><a href="#cb129-624" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-625"><a href="#cb129-625" aria-hidden="true" tabindex="-1"></a>tbl <span class="sc">%&gt;%</span> </span>
<span id="cb129-626"><a href="#cb129-626" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(group) <span class="sc">%&gt;%</span> </span>
<span id="cb129-627"><a href="#cb129-627" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">my_mean =</span> <span class="fu">mean</span>(weight))</span>
<span id="cb129-628"><a href="#cb129-628" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-629"><a href="#cb129-629" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-630"><a href="#cb129-630" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-631"><a href="#cb129-631" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-632"><a href="#cb129-632" aria-hidden="true" tabindex="-1"></a>You can create multiple summary output columns (left) and have multiple grouping columns (right):</span>
<span id="cb129-633"><a href="#cb129-633" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-634"><a href="#cb129-634" aria-hidden="true" tabindex="-1"></a>::: columns</span>
<span id="cb129-635"><a href="#cb129-635" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-638"><a href="#cb129-638" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-639"><a href="#cb129-639" aria-hidden="true" tabindex="-1"></a>tbl <span class="sc">%&gt;%</span> </span>
<span id="cb129-640"><a href="#cb129-640" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(group) <span class="sc">%&gt;%</span> </span>
<span id="cb129-641"><a href="#cb129-641" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb129-642"><a href="#cb129-642" aria-hidden="true" tabindex="-1"></a>    <span class="at">Mean =</span> <span class="fu">mean</span>(weight),</span>
<span id="cb129-643"><a href="#cb129-643" aria-hidden="true" tabindex="-1"></a>    <span class="at">StdDev =</span> <span class="fu">sd</span>(weight),</span>
<span id="cb129-644"><a href="#cb129-644" aria-hidden="true" tabindex="-1"></a>    <span class="at">Min =</span> <span class="fu">min</span>(weight),</span>
<span id="cb129-645"><a href="#cb129-645" aria-hidden="true" tabindex="-1"></a>    <span class="at">Median =</span> <span class="fu">median</span>(weight),</span>
<span id="cb129-646"><a href="#cb129-646" aria-hidden="true" tabindex="-1"></a>    <span class="at">Max =</span> <span class="fu">max</span>(weight),</span>
<span id="cb129-647"><a href="#cb129-647" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_Obs =</span> <span class="fu">n</span>(),</span>
<span id="cb129-648"><a href="#cb129-648" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb129-649"><a href="#cb129-649" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-650"><a href="#cb129-650" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-651"><a href="#cb129-651" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-652"><a href="#cb129-652" aria-hidden="true" tabindex="-1"></a>::: {.column width="2%"}</span>
<span id="cb129-653"><a href="#cb129-653" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-654"><a href="#cb129-654" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-655"><a href="#cb129-655" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-658"><a href="#cb129-658" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-659"><a href="#cb129-659" aria-hidden="true" tabindex="-1"></a>tbl <span class="sc">%&gt;%</span> </span>
<span id="cb129-660"><a href="#cb129-660" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">larger5 =</span> <span class="fu">case_when</span>(</span>
<span id="cb129-661"><a href="#cb129-661" aria-hidden="true" tabindex="-1"></a>    weight <span class="sc">&gt;</span> <span class="dv">5</span> <span class="sc">~</span> <span class="st">"yes"</span>,</span>
<span id="cb129-662"><a href="#cb129-662" aria-hidden="true" tabindex="-1"></a>    weight <span class="sc">&lt;</span> <span class="dv">5</span> <span class="sc">~</span> <span class="st">"no"</span></span>
<span id="cb129-663"><a href="#cb129-663" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span> </span>
<span id="cb129-664"><a href="#cb129-664" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(group, larger5) <span class="sc">%&gt;%</span> </span>
<span id="cb129-665"><a href="#cb129-665" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb129-666"><a href="#cb129-666" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_Obs =</span> <span class="fu">n</span>(),</span>
<span id="cb129-667"><a href="#cb129-667" aria-hidden="true" tabindex="-1"></a>    <span class="at">Mean =</span> <span class="fu">mean</span>(weight)</span>
<span id="cb129-668"><a href="#cb129-668" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb129-669"><a href="#cb129-669" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-670"><a href="#cb129-670" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-671"><a href="#cb129-671" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-672"><a href="#cb129-672" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-673"><a href="#cb129-673" aria-hidden="true" tabindex="-1"></a>Just like with <span class="in">`mutate()`</span>, we can make use of <span class="in">`across()`</span> to deal with multiple columns:</span>
<span id="cb129-674"><a href="#cb129-674" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-675"><a href="#cb129-675" aria-hidden="true" tabindex="-1"></a>::: columns</span>
<span id="cb129-676"><a href="#cb129-676" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-679"><a href="#cb129-679" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-680"><a href="#cb129-680" aria-hidden="true" tabindex="-1"></a>tbl <span class="sc">%&gt;%</span></span>
<span id="cb129-681"><a href="#cb129-681" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">v1 =</span> <span class="dv">1</span>, <span class="at">v2 =</span> <span class="dv">2</span>, <span class="at">v3 =</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb129-682"><a href="#cb129-682" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(group) <span class="sc">%&gt;%</span></span>
<span id="cb129-683"><a href="#cb129-683" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(</span>
<span id="cb129-684"><a href="#cb129-684" aria-hidden="true" tabindex="-1"></a>    <span class="fu">where</span>(is.numeric), </span>
<span id="cb129-685"><a href="#cb129-685" aria-hidden="true" tabindex="-1"></a>    <span class="sc">~</span> <span class="fu">mean</span>(.x)</span>
<span id="cb129-686"><a href="#cb129-686" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb129-687"><a href="#cb129-687" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-688"><a href="#cb129-688" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-689"><a href="#cb129-689" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-690"><a href="#cb129-690" aria-hidden="true" tabindex="-1"></a>::: {.column width="2%"}</span>
<span id="cb129-691"><a href="#cb129-691" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-692"><a href="#cb129-692" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-693"><a href="#cb129-693" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-696"><a href="#cb129-696" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-697"><a href="#cb129-697" aria-hidden="true" tabindex="-1"></a>tbl <span class="sc">%&gt;%</span></span>
<span id="cb129-698"><a href="#cb129-698" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">v1 =</span> <span class="dv">1</span>, <span class="at">v2 =</span> <span class="dv">2</span>, <span class="at">v3 =</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb129-699"><a href="#cb129-699" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(group) <span class="sc">%&gt;%</span></span>
<span id="cb129-700"><a href="#cb129-700" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(</span>
<span id="cb129-701"><a href="#cb129-701" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(weight, v3),</span>
<span id="cb129-702"><a href="#cb129-702" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(</span>
<span id="cb129-703"><a href="#cb129-703" aria-hidden="true" tabindex="-1"></a>    <span class="at">Min =</span> <span class="sc">~</span> <span class="fu">min</span>(.x),</span>
<span id="cb129-704"><a href="#cb129-704" aria-hidden="true" tabindex="-1"></a>    <span class="at">Max =</span> <span class="sc">~</span> <span class="fu">max</span>(.x)</span>
<span id="cb129-705"><a href="#cb129-705" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb129-706"><a href="#cb129-706" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb129-707"><a href="#cb129-707" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-708"><a href="#cb129-708" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-709"><a href="#cb129-709" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-710"><a href="#cb129-710" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-711"><a href="#cb129-711" aria-hidden="true" tabindex="-1"></a>::: callout-important</span>
<span id="cb129-712"><a href="#cb129-712" aria-hidden="true" tabindex="-1"></a>Once you used <span class="in">`group_by()`</span> on a table, it stays grouped unless you use <span class="in">`ungroup()`</span> on it afterwards. This was not relevant in the examples above, but you must be aware of this if you are using the grouped (summary) results for further steps, since this can lead to unexpected results. You can find an example and further resources on such unintended outcomes <span class="co">[</span><span class="ot">here</span><span class="co">](https://twitter.com/SchmidtPaul1989/status/1586284894556418049)</span>.</span>
<span id="cb129-713"><a href="#cb129-713" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-714"><a href="#cb129-714" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-715"><a href="#cb129-715" aria-hidden="true" tabindex="-1"></a>::: {.callout-tip collapse="true"}</span>
<span id="cb129-716"><a href="#cb129-716" aria-hidden="true" tabindex="-1"></a><span class="fu">## Additional Resources</span></span>
<span id="cb129-717"><a href="#cb129-717" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-718"><a href="#cb129-718" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">5.6 Grouped summaries with summarise()</span><span class="co">](https://r4ds.had.co.nz/transform.html#grouped-summaries-with-summarise)</span> in *R for data science* <span class="co">[</span><span class="ot">@wickham_2017</span><span class="co">]</span></span>
<span id="cb129-719"><a href="#cb129-719" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Summarise each group to fewer rows with summarise()</span><span class="co">](https://dplyr.tidyverse.org/reference/summarise.html)</span></span>
<span id="cb129-720"><a href="#cb129-720" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Group by one or more variables with group_by()</span><span class="co">](https://dplyr.tidyverse.org/reference/group_by.html)</span></span>
<span id="cb129-721"><a href="#cb129-721" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-722"><a href="#cb129-722" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-723"><a href="#cb129-723" aria-hidden="true" tabindex="-1"></a><span class="fu"># long/wide format</span></span>
<span id="cb129-724"><a href="#cb129-724" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-725"><a href="#cb129-725" aria-hidden="true" tabindex="-1"></a>Sometimes, data is referred to as being in *long format* or *wide format*. As the name suggests, long formatted tables have more rows, but fewer columns than wide formatted tables, while containing the same information. I find the easiest way to understand the two is by looking at examples like in the following image, which was taken from <span class="co">[</span><span class="ot">statology.org</span><span class="co">](https://www.statology.org/long-vs-wide-data/)</span>:</span>
<span id="cb129-726"><a href="#cb129-726" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-729"><a href="#cb129-729" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-730"><a href="#cb129-730" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb129-731"><a href="#cb129-731" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb129-732"><a href="#cb129-732" aria-hidden="true" tabindex="-1"></a><span class="co">#| out-width: '80%'</span></span>
<span id="cb129-733"><a href="#cb129-733" aria-hidden="true" tabindex="-1"></a>here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"img"</span>, <span class="st">"longwide.png"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb129-734"><a href="#cb129-734" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">include_graphics</span>()</span>
<span id="cb129-735"><a href="#cb129-735" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-736"><a href="#cb129-736" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-737"><a href="#cb129-737" aria-hidden="true" tabindex="-1"></a>Converting one format into the other is called *pivoting* in the tidyverse and the relevant functions <span class="in">`pivot_longer()`</span> and <span class="in">`pivot_wider()`</span> are provided in <span class="co">[</span><span class="ot">{tidyr}</span><span class="co">](https://tidyr.tidyverse.org/reference/index.html)</span>.</span>
<span id="cb129-738"><a href="#cb129-738" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-739"><a href="#cb129-739" aria-hidden="true" tabindex="-1"></a>::: callout-note</span>
<span id="cb129-740"><a href="#cb129-740" aria-hidden="true" tabindex="-1"></a>You may have used other functions in this context. Here are some alternatives that <span class="co">[</span><span class="ot">are superseded</span><span class="co">](https://github.com/tidyverse/tidyr#related-work)</span>:</span>
<span id="cb129-741"><a href="#cb129-741" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-742"><a href="#cb129-742" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`melt()`</span> &amp; <span class="in">`dcast()`</span> of {data.table}</span>
<span id="cb129-743"><a href="#cb129-743" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`fold()`</span> &amp; <span class="in">`unfold()`</span> of {databases}</span>
<span id="cb129-744"><a href="#cb129-744" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`melt()`</span> &amp; <span class="in">`cast()`</span> of {reshape}</span>
<span id="cb129-745"><a href="#cb129-745" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`melt()`</span> &amp; <span class="in">`dcast()`</span> of {reshape2}</span>
<span id="cb129-746"><a href="#cb129-746" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`unpivot()`</span> &amp; <span class="in">`pivot()`</span> of {spreadsheets}</span>
<span id="cb129-747"><a href="#cb129-747" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="in">`gather()`</span> &amp; <span class="in">`spread()`</span> of {tidyr} <span class="sc">\&lt;</span> v1.0.0</span>
<span id="cb129-748"><a href="#cb129-748" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-749"><a href="#cb129-749" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-750"><a href="#cb129-750" aria-hidden="true" tabindex="-1"></a>The <span class="in">`PlantGrowth`</span> data from above is actually already in long format, yet I create a version of it that is shorter (only 3 instead of 10 observations per group) and has an additional column called <span class="in">`nr`</span> with is a running number per observation in each group:</span>
<span id="cb129-751"><a href="#cb129-751" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-754"><a href="#cb129-754" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-755"><a href="#cb129-755" aria-hidden="true" tabindex="-1"></a>long_dat <span class="ot">&lt;-</span> PlantGrowth <span class="sc">%&gt;%</span></span>
<span id="cb129-756"><a href="#cb129-756" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(group) <span class="sc">%&gt;%</span> <span class="co"># for each level in the "group" column</span></span>
<span id="cb129-757"><a href="#cb129-757" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>) <span class="sc">%&gt;%</span> <span class="co"># keep only the rows 1-3</span></span>
<span id="cb129-758"><a href="#cb129-758" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">nr =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">n</span>(), <span class="co"># add a "nr" column with numbers 1 - ...</span></span>
<span id="cb129-759"><a href="#cb129-759" aria-hidden="true" tabindex="-1"></a>         <span class="at">.before =</span> <span class="st">"weight"</span>) <span class="sc">%&gt;%</span> <span class="co"># add this column left of "weight" column</span></span>
<span id="cb129-760"><a href="#cb129-760" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="co"># remove the grouping from above</span></span>
<span id="cb129-761"><a href="#cb129-761" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-762"><a href="#cb129-762" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-763"><a href="#cb129-763" aria-hidden="true" tabindex="-1"></a>We can now use <span class="in">`pivot_wider()`</span> and create a wide formatted version of the <span class="in">`long_dat`</span> table and save it as <span class="in">`wide_dat`</span>. Note that the function has multiple arguments you can use, but for me it is usually enough to use <span class="in">`names from =`</span> and <span class="in">`values_from =`</span>. In the former you provide the name of the column whose entries should be the names of the new columns in the wide formatted data. In the latter you provide the name of the column whose values should be written in the new columns in the wide formatted data:</span>
<span id="cb129-764"><a href="#cb129-764" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-765"><a href="#cb129-765" aria-hidden="true" tabindex="-1"></a>::: columns</span>
<span id="cb129-766"><a href="#cb129-766" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-769"><a href="#cb129-769" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-770"><a href="#cb129-770" aria-hidden="true" tabindex="-1"></a>long_dat</span>
<span id="cb129-771"><a href="#cb129-771" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-772"><a href="#cb129-772" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-773"><a href="#cb129-773" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-774"><a href="#cb129-774" aria-hidden="true" tabindex="-1"></a>::: {.column width="2%"}</span>
<span id="cb129-775"><a href="#cb129-775" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-776"><a href="#cb129-776" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-777"><a href="#cb129-777" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-780"><a href="#cb129-780" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-781"><a href="#cb129-781" aria-hidden="true" tabindex="-1"></a>wide_dat <span class="ot">&lt;-</span> long_dat <span class="sc">%&gt;%</span></span>
<span id="cb129-782"><a href="#cb129-782" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">"group"</span>, </span>
<span id="cb129-783"><a href="#cb129-783" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> <span class="st">"weight"</span>)</span>
<span id="cb129-784"><a href="#cb129-784" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-785"><a href="#cb129-785" aria-hidden="true" tabindex="-1"></a>wide_dat</span>
<span id="cb129-786"><a href="#cb129-786" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-787"><a href="#cb129-787" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-788"><a href="#cb129-788" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-789"><a href="#cb129-789" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-790"><a href="#cb129-790" aria-hidden="true" tabindex="-1"></a>We can use <span class="in">`pivot_longer`</span> to reverse the step above, i.e. create a long formatted version of the <span class="in">`wide_dat`</span> table. Again, the function has multiple arguments you can use, but for me it is usually enough to use <span class="in">`cols =`</span>, <span class="in">`names_to =`</span> and <span class="in">`values_to =`</span>. In the first one, you provide the names of the columns who should be reduced to fewer columns with more rows. In the other two you simply give the names that the created columns should have instead of the default <span class="in">`name`</span> and <span class="in">`value`</span>. Note that it is sometimes easier to provide the names of columns that should not go into <span class="in">`cols =`</span> (right) instead of the ones that should (left).</span>
<span id="cb129-791"><a href="#cb129-791" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-792"><a href="#cb129-792" aria-hidden="true" tabindex="-1"></a>::: columns</span>
<span id="cb129-793"><a href="#cb129-793" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-796"><a href="#cb129-796" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-797"><a href="#cb129-797" aria-hidden="true" tabindex="-1"></a>wide_dat <span class="sc">%&gt;%</span></span>
<span id="cb129-798"><a href="#cb129-798" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb129-799"><a href="#cb129-799" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">c</span>(ctrl, trt1, trt2),</span>
<span id="cb129-800"><a href="#cb129-800" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"group"</span>,</span>
<span id="cb129-801"><a href="#cb129-801" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"weight"</span></span>
<span id="cb129-802"><a href="#cb129-802" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb129-803"><a href="#cb129-803" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-804"><a href="#cb129-804" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-805"><a href="#cb129-805" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-806"><a href="#cb129-806" aria-hidden="true" tabindex="-1"></a>::: {.column width="2%"}</span>
<span id="cb129-807"><a href="#cb129-807" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-808"><a href="#cb129-808" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-809"><a href="#cb129-809" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-812"><a href="#cb129-812" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-813"><a href="#cb129-813" aria-hidden="true" tabindex="-1"></a>wide_dat <span class="sc">%&gt;%</span></span>
<span id="cb129-814"><a href="#cb129-814" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb129-815"><a href="#cb129-815" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="sc">-</span>nr,</span>
<span id="cb129-816"><a href="#cb129-816" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"group"</span>,</span>
<span id="cb129-817"><a href="#cb129-817" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"weight"</span></span>
<span id="cb129-818"><a href="#cb129-818" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb129-819"><a href="#cb129-819" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-820"><a href="#cb129-820" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-821"><a href="#cb129-821" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-822"><a href="#cb129-822" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-823"><a href="#cb129-823" aria-hidden="true" tabindex="-1"></a>::: {.callout-tip collapse="true"}</span>
<span id="cb129-824"><a href="#cb129-824" aria-hidden="true" tabindex="-1"></a><span class="fu">## Additional Resources</span></span>
<span id="cb129-825"><a href="#cb129-825" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-826"><a href="#cb129-826" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">12.3 Pivoting</span><span class="co">](https://r4ds.had.co.nz/tidy-data.html?q=pivot#pivoting)</span> in *R for data science* <span class="co">[</span><span class="ot">@wickham_2017</span><span class="co">]</span></span>
<span id="cb129-827"><a href="#cb129-827" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Pivoting with tidyr</span><span class="co">](https://tidyr.tidyverse.org/articles/pivot.html)</span></span>
<span id="cb129-828"><a href="#cb129-828" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">tidyr cheat sheet</span><span class="co">](https://github.com/rstudio/cheatsheets/blob/main/tidyr.pdf)</span></span>
<span id="cb129-829"><a href="#cb129-829" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-830"><a href="#cb129-830" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-831"><a href="#cb129-831" aria-hidden="true" tabindex="-1"></a><span class="fu"># forcats</span></span>
<span id="cb129-832"><a href="#cb129-832" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-833"><a href="#cb129-833" aria-hidden="true" tabindex="-1"></a>In my experience, R beginners really only care about the difference between <span class="in">`factor`</span> and <span class="in">`character`</span> variables once the factor level order is not as they want it to be - typically on the x-axis of a plot. Luckily, <span class="co">[</span><span class="ot">{forcats}</span><span class="co">](https://forcats.tidyverse.org/)</span> can deal with this.</span>
<span id="cb129-834"><a href="#cb129-834" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-835"><a href="#cb129-835" aria-hidden="true" tabindex="-1"></a>In the following example, we create a column <span class="in">`fct`</span> that is a copy of the column <span class="in">`chr`</span>, except that they are formatted as <span class="in">`factor`</span> and <span class="in">`character`</span>, respectively.</span>
<span id="cb129-836"><a href="#cb129-836" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-839"><a href="#cb129-839" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-840"><a href="#cb129-840" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb129-841"><a href="#cb129-841" aria-hidden="true" tabindex="-1"></a>     <span class="sc">~</span>val,   <span class="sc">~</span>chr,</span>
<span id="cb129-842"><a href="#cb129-842" aria-hidden="true" tabindex="-1"></a>       <span class="dv">10</span>, <span class="st">"Ctrl"</span>, </span>
<span id="cb129-843"><a href="#cb129-843" aria-hidden="true" tabindex="-1"></a>       <span class="dv">15</span>,    <span class="st">"A"</span>,</span>
<span id="cb129-844"><a href="#cb129-844" aria-hidden="true" tabindex="-1"></a>        <span class="dv">8</span>,    <span class="st">"B"</span></span>
<span id="cb129-845"><a href="#cb129-845" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb129-846"><a href="#cb129-846" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fct =</span> <span class="fu">as.factor</span>(chr))</span>
<span id="cb129-847"><a href="#cb129-847" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-848"><a href="#cb129-848" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dat) <span class="sc">+</span></span>
<span id="cb129-849"><a href="#cb129-849" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">y =</span> val, <span class="at">x =</span> fct) <span class="sc">+</span></span>
<span id="cb129-850"><a href="#cb129-850" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span>
<span id="cb129-851"><a href="#cb129-851" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-852"><a href="#cb129-852" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-853"><a href="#cb129-853" aria-hidden="true" tabindex="-1"></a>Even though the data is sorted so that Ctrl is first, then A, then B, the x-Axis is sorted differently<span class="ot">[^4]</span>. This is because factor levels are always sorted alphabetically by default. We can reorder them via different functions in {forcats}:</span>
<span id="cb129-854"><a href="#cb129-854" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-855"><a href="#cb129-855" aria-hidden="true" tabindex="-1"></a><span class="ot">[^4]: </span>It does not make a difference here, whether we put <span class="in">`x = chr`</span> or <span class="in">`x = fct`</span> in the ggplot statement.</span>
<span id="cb129-856"><a href="#cb129-856" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-859"><a href="#cb129-859" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-860"><a href="#cb129-860" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span> </span>
<span id="cb129-861"><a href="#cb129-861" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb129-862"><a href="#cb129-862" aria-hidden="true" tabindex="-1"></a>    <span class="at">fct2 =</span> <span class="fu">fct_relevel</span>(fct, <span class="fu">c</span>(<span class="st">"Ctrl"</span>, <span class="st">"A"</span>, <span class="st">"B"</span>)),</span>
<span id="cb129-863"><a href="#cb129-863" aria-hidden="true" tabindex="-1"></a>    <span class="at">fct3 =</span> <span class="fu">fct_reorder</span>(fct, val, mean)</span>
<span id="cb129-864"><a href="#cb129-864" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb129-865"><a href="#cb129-865" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-866"><a href="#cb129-866" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dat)</span>
<span id="cb129-867"><a href="#cb129-867" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-868"><a href="#cb129-868" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-869"><a href="#cb129-869" aria-hidden="true" tabindex="-1"></a>Above are just two popular examples for sorting factor levels: <span class="in">`fct_relevel`</span> sorts the levels manually by providing a vector with the level names in the order they should appear, while <span class="in">`fct_reorder`</span> here sorts the levels according to their respective group mean<span class="ot">[^5]</span> of the values in the <span class="in">`val`</span> column.</span>
<span id="cb129-870"><a href="#cb129-870" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-871"><a href="#cb129-871" aria-hidden="true" tabindex="-1"></a><span class="ot">[^5]: </span>Yes, the mean in this example is not really a mean, since there is only one number per group.</span>
<span id="cb129-872"><a href="#cb129-872" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-873"><a href="#cb129-873" aria-hidden="true" tabindex="-1"></a>You can see that it worked in the output of <span class="in">`str(dat)`</span> above and in the plots below.</span>
<span id="cb129-874"><a href="#cb129-874" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-875"><a href="#cb129-875" aria-hidden="true" tabindex="-1"></a>::: columns</span>
<span id="cb129-876"><a href="#cb129-876" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-879"><a href="#cb129-879" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-880"><a href="#cb129-880" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 5</span></span>
<span id="cb129-881"><a href="#cb129-881" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 3</span></span>
<span id="cb129-882"><a href="#cb129-882" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dat) <span class="sc">+</span></span>
<span id="cb129-883"><a href="#cb129-883" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">y =</span> val, <span class="at">x =</span> fct2) <span class="sc">+</span></span>
<span id="cb129-884"><a href="#cb129-884" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span>
<span id="cb129-885"><a href="#cb129-885" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-886"><a href="#cb129-886" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-887"><a href="#cb129-887" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-888"><a href="#cb129-888" aria-hidden="true" tabindex="-1"></a>::: {.column width="2%"}</span>
<span id="cb129-889"><a href="#cb129-889" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-890"><a href="#cb129-890" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-891"><a href="#cb129-891" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-894"><a href="#cb129-894" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-895"><a href="#cb129-895" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 5</span></span>
<span id="cb129-896"><a href="#cb129-896" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 3</span></span>
<span id="cb129-897"><a href="#cb129-897" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dat) <span class="sc">+</span></span>
<span id="cb129-898"><a href="#cb129-898" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">y =</span> val, <span class="at">x =</span> fct3) <span class="sc">+</span></span>
<span id="cb129-899"><a href="#cb129-899" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span>
<span id="cb129-900"><a href="#cb129-900" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-901"><a href="#cb129-901" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-902"><a href="#cb129-902" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-903"><a href="#cb129-903" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-904"><a href="#cb129-904" aria-hidden="true" tabindex="-1"></a><span class="fu"># stringr</span></span>
<span id="cb129-905"><a href="#cb129-905" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-906"><a href="#cb129-906" aria-hidden="true" tabindex="-1"></a>In computer programming, a string is traditionally a sequence of characters (or *text* if you will). Taken directly from <span class="co">[</span><span class="ot">the documentation</span><span class="co">](https://stringr.tidyverse.org/)</span>:</span>
<span id="cb129-907"><a href="#cb129-907" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-908"><a href="#cb129-908" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; Strings are not glamorous, high-profile components of R, but they do play a big role in many data cleaning and preparation tasks. The stringr package provide a cohesive set of functions designed to make working with strings as easy as possible. If you're not familiar with strings, the best place to start is the </span><span class="co">[</span><span class="ot">chapter on strings in R for Data Science</span><span class="co">](https://r4ds.had.co.nz/strings.html)</span><span class="at">.</span></span>
<span id="cb129-909"><a href="#cb129-909" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-910"><a href="#cb129-910" aria-hidden="true" tabindex="-1"></a>Below are some brief examples of <span class="co">[</span><span class="ot">{stringr}</span><span class="co">](https://stringr.tidyverse.org/)</span> functions I use regularly. To show what they can do, let's first create some strings<span class="ot">[^6]</span>:</span>
<span id="cb129-911"><a href="#cb129-911" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-912"><a href="#cb129-912" aria-hidden="true" tabindex="-1"></a><span class="ot">[^6]: </span>Note that while I create two vectors in this example, this will work just as well with columns of a table via <span class="sc">\`</span>table %<span class="sc">\&gt;</span>% mutate(new = stringrfunction(old))<span class="sc">\`</span></span>
<span id="cb129-913"><a href="#cb129-913" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-916"><a href="#cb129-916" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-917"><a href="#cb129-917" aria-hidden="true" tabindex="-1"></a>a_string <span class="ot">&lt;-</span> <span class="st">"  a  string with irregular  spaces. "</span></span>
<span id="cb129-918"><a href="#cb129-918" aria-hidden="true" tabindex="-1"></a>strings <span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">"String 1"</span>, <span class="st">"String Two"</span>, <span class="st">"third string"</span>)</span>
<span id="cb129-919"><a href="#cb129-919" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-920"><a href="#cb129-920" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-921"><a href="#cb129-921" aria-hidden="true" tabindex="-1"></a>To remove part of a string, use <span class="in">`str_remove()`</span>. To replace it, use <span class="in">`str_replace()`</span>.</span>
<span id="cb129-922"><a href="#cb129-922" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-923"><a href="#cb129-923" aria-hidden="true" tabindex="-1"></a>::: columns</span>
<span id="cb129-924"><a href="#cb129-924" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-927"><a href="#cb129-927" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-928"><a href="#cb129-928" aria-hidden="true" tabindex="-1"></a>strings <span class="sc">%&gt;%</span> </span>
<span id="cb129-929"><a href="#cb129-929" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_remove</span>(<span class="at">pattern =</span> <span class="st">"ing"</span>)</span>
<span id="cb129-930"><a href="#cb129-930" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-931"><a href="#cb129-931" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-932"><a href="#cb129-932" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-933"><a href="#cb129-933" aria-hidden="true" tabindex="-1"></a>::: {.column width="2%"}</span>
<span id="cb129-934"><a href="#cb129-934" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-935"><a href="#cb129-935" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-936"><a href="#cb129-936" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-939"><a href="#cb129-939" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-940"><a href="#cb129-940" aria-hidden="true" tabindex="-1"></a>strings <span class="sc">%&gt;%</span></span>
<span id="cb129-941"><a href="#cb129-941" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace</span>(<span class="at">pattern =</span> <span class="st">"ing"</span>,</span>
<span id="cb129-942"><a href="#cb129-942" aria-hidden="true" tabindex="-1"></a>              <span class="at">replacement =</span> <span class="st">"."</span>)</span>
<span id="cb129-943"><a href="#cb129-943" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-944"><a href="#cb129-944" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-945"><a href="#cb129-945" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-946"><a href="#cb129-946" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-947"><a href="#cb129-947" aria-hidden="true" tabindex="-1"></a>The functions <span class="in">`str_trim()`</span> and <span class="in">`str_squish()`</span> help remove unnecessary spaces from strings. The former removes them only from from start and end, while the latter also reduces repeated whitespace inside a string.</span>
<span id="cb129-948"><a href="#cb129-948" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-949"><a href="#cb129-949" aria-hidden="true" tabindex="-1"></a>::: columns</span>
<span id="cb129-950"><a href="#cb129-950" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-953"><a href="#cb129-953" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-954"><a href="#cb129-954" aria-hidden="true" tabindex="-1"></a>a_string <span class="sc">%&gt;%</span> </span>
<span id="cb129-955"><a href="#cb129-955" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_trim</span>()</span>
<span id="cb129-956"><a href="#cb129-956" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-957"><a href="#cb129-957" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-958"><a href="#cb129-958" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-959"><a href="#cb129-959" aria-hidden="true" tabindex="-1"></a>::: {.column width="2%"}</span>
<span id="cb129-960"><a href="#cb129-960" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-961"><a href="#cb129-961" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-962"><a href="#cb129-962" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-965"><a href="#cb129-965" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-966"><a href="#cb129-966" aria-hidden="true" tabindex="-1"></a>a_string <span class="sc">%&gt;%</span> </span>
<span id="cb129-967"><a href="#cb129-967" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_squish</span>()</span>
<span id="cb129-968"><a href="#cb129-968" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-969"><a href="#cb129-969" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-970"><a href="#cb129-970" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-971"><a href="#cb129-971" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-972"><a href="#cb129-972" aria-hidden="true" tabindex="-1"></a>Finally, you can check if a pattern appears in a string, or extract part of a string:</span>
<span id="cb129-973"><a href="#cb129-973" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-974"><a href="#cb129-974" aria-hidden="true" tabindex="-1"></a>::: columns</span>
<span id="cb129-975"><a href="#cb129-975" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-978"><a href="#cb129-978" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-979"><a href="#cb129-979" aria-hidden="true" tabindex="-1"></a>strings <span class="sc">%&gt;%</span> </span>
<span id="cb129-980"><a href="#cb129-980" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_detect</span>(<span class="at">pattern =</span> <span class="st">"Two"</span>)</span>
<span id="cb129-981"><a href="#cb129-981" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-982"><a href="#cb129-982" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-983"><a href="#cb129-983" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-984"><a href="#cb129-984" aria-hidden="true" tabindex="-1"></a>::: {.column width="2%"}</span>
<span id="cb129-985"><a href="#cb129-985" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-986"><a href="#cb129-986" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-987"><a href="#cb129-987" aria-hidden="true" tabindex="-1"></a>::: {.column width="49%"}</span>
<span id="cb129-990"><a href="#cb129-990" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb129-991"><a href="#cb129-991" aria-hidden="true" tabindex="-1"></a>strings <span class="sc">%&gt;%</span> </span>
<span id="cb129-992"><a href="#cb129-992" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_sub</span>(<span class="at">start =</span> <span class="dv">1</span>, <span class="at">end =</span> <span class="dv">4</span>)</span>
<span id="cb129-993"><a href="#cb129-993" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb129-994"><a href="#cb129-994" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-995"><a href="#cb129-995" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb129-996"><a href="#cb129-996" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-997"><a href="#cb129-997" aria-hidden="true" tabindex="-1"></a>::: {.callout-tip collapse="true"}</span>
<span id="cb129-998"><a href="#cb129-998" aria-hidden="true" tabindex="-1"></a><span class="fu">## Additional Resources</span></span>
<span id="cb129-999"><a href="#cb129-999" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-1000"><a href="#cb129-1000" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">14 Strings</span><span class="co">](https://r4ds.had.co.nz/strings.html)</span> in *R for data science* <span class="co">[</span><span class="ot">@wickham_2017</span><span class="co">]</span></span>
<span id="cb129-1001"><a href="#cb129-1001" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">stringr cheat sheet</span><span class="co">](https://github.com/rstudio/cheatsheets/blob/main/strings.pdf)</span></span>
<span id="cb129-1002"><a href="#cb129-1002" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span><span class="co">[</span><span class="ot">Regular expressions</span><span class="co">](https://stringr.tidyverse.org/articles/regular-expressions.html)</span></span>
<span id="cb129-1003"><a href="#cb129-1003" aria-hidden="true" tabindex="-1"></a>:::</span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
<li class="nav-item">
 <p>All content licensed under a <a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">Creative Commons Attribution-NonCommercial 4.0 International License</a>.</p>
  </li>  
</ul>
</div>
  </div>
</footer><script>var lightboxQuarto = GLightbox({"selector":".lightbox","openEffect":"fade","descPosition":"bottom","closeEffect":"fade","loop":true});</script>


</body></html>